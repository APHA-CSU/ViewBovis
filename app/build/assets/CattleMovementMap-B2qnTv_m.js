import{c as t,b as e,d as n,e as s,f as i,R as o,r,u as a,j as l}from"./index-DOaejuqn.js";import{l as d,u as c,L as p}from"./hooks-CnKZ5wNx.js";import{M as u,T as h,B as g,R as f,H as m,a as b,_ as y,b as v,m as C}from"./Basemaps-BROOgGAY.js";const _="data:image/svg+xml,%3csvg%20width='103'%20height='126'%20viewBox='0%200%20103%20126'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M83.6875%2063C83.6875%2091.556%2056.013%20110.037%2051.9863%20112.575C51.6771%20112.77%2051.3229%20112.77%2051.0137%20112.575C46.987%20110.037%2019.3125%2091.556%2019.3125%2063C19.3125%2039.375%2034.9084%2023.625%2051.5%2023.625C68.6667%2023.625%2083.6875%2039.375%2083.6875%2063Z'%20fill='%23222222'%20stroke='%23222222'/%3e%3cpath%20d='M68.1667%2063C68.1667%2074.4208%2060.6152%2083.5%2051.5%2083.5C42.3847%2083.5%2034.8333%2074.4208%2034.8333%2063C34.8333%2051.5792%2042.3847%2042.5%2051.5%2042.5C60.6152%2042.5%2068.1667%2051.5792%2068.1667%2063Z'%20fill='white'%20stroke='white'/%3e%3c/svg%3e",x="/assets/showground-Ykyjdfcl.svg",w="data:image/svg+xml,%3csvg%20width='103'%20height='126'%20viewBox='0%200%20103%20126'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M52.013%20112.617C54.0284%20111.347%2061.9582%20106.089%2069.3846%2097.5771C76.8108%2089.0652%2083.7375%2077.2947%2083.7375%2063C83.7375%2039.3549%2068.7013%2023.575%2051.5%2023.575C34.8744%2023.575%2019.2625%2039.3543%2019.2625%2063C19.2625%2077.2947%2026.1892%2089.0652%2033.6154%2097.5771C41.0418%20106.089%2048.9716%20111.347%2050.987%20112.617C51.3125%20112.822%2051.6875%20112.822%2052.013%20112.617Z'%20fill='%23222222'%20stroke='%23222222'%20stroke-width='0.1'/%3e%3cpath%20d='M68.1667%2063C68.1667%2074.4208%2060.6153%2083.5%2051.5%2083.5C42.3848%2083.5%2034.8333%2074.4208%2034.8333%2063C34.8333%2051.5792%2042.3848%2042.5%2051.5%2042.5C60.6153%2042.5%2068.1667%2051.5792%2068.1667%2063Z'%20fill='white'%20stroke='white'/%3e%3cellipse%20cx='51.5'%20cy='62.5'%20rx='24.5'%20ry='29.5'%20fill='white'/%3e%3cpath%20d='M49.5847%2057.4726H56.9068V62.8483H50.433C50.3496%2064.1127%2050.1026%2065.2526%2049.6829%2066.2707C49.3466%2067.0426%2048.784%2067.8477%2047.9952%2068.6833C48.8941%2068.5007%2049.668%2068.4066%2050.3109%2068.4066C51.1354%2068.4066%2052.204%2068.5533%2053.5226%2068.8438C55.3263%2069.2256%2056.7669%2069.4192%2057.8474%2069.4192C58.7284%2069.4192%2059.4964%2069.3501%2060.1453%2069.2117C60.8031%2069.0734%2061.6603%2068.7829%2062.714%2068.3402L66%2075.0467C64.4106%2075.7826%2063.0086%2076.2945%2061.7972%2076.5795C60.5947%2076.8617%2059.3029%2077%2057.9159%2077C56.4008%2077%2054.6774%2076.7538%2052.7249%2076.2641C50.171%2075.6139%2048.5905%2075.2376%2047.9714%2075.1297C47.3612%2075.0301%2046.7034%2074.9775%2045.995%2074.9775C43.9204%2074.9775%2041.6285%2075.6498%2039.1253%2077L36%2070.6117C39.3932%2068.3596%2041.0898%2066.1103%2041.0898%2063.8582C41.0898%2063.7364%2041.0719%2063.3989%2041.0392%2062.8483H36V57.4726H39.6075C38.9973%2055.5055%2038.6431%2054.3573%2038.5687%2054.0419C38.4705%2053.566%2038.4199%2052.9767%2038.4199%2052.274C38.4199%2050.4065%2038.9557%2048.7298%2040.0272%2047.2441C41.0898%2045.7584%2042.4977%2044.6794%2044.2449%2044.0126C45.9921%2043.3375%2048.3405%2043%2051.2962%2043C54.0643%2043%2056.255%2043.2905%2057.8682%2043.866C59.4845%2044.4387%2060.8537%2045.396%2061.9639%2046.7295C63.083%2048.0686%2063.851%2049.6844%2064.2707%2051.5851L55.0287%2052.9242C54.5673%2051.3305%2054.0316%2050.2737%2053.4303%2049.7535C52.8291%2049.2334%2052.1445%2048.9733%2051.3795%2048.9733C50.4479%2048.9733%2049.6978%2049.2555%2049.1233%2049.8227C48.5459%2050.3899%2048.2572%2051.1922%2048.2572%2052.2353C48.2572%2052.7941%2048.3137%2053.3226%2048.4298%2053.8344C48.537%2054.3545%2048.9239%2055.5664%2049.5847%2057.4726Z'%20fill='%23222222'/%3e%3c/svg%3e",A="data:image/svg+xml,%3csvg%20width='103'%20height='126'%20viewBox='0%200%20103%20126'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M52.013%20112.617C54.0284%20111.347%2061.9582%20106.089%2069.3846%2097.5771C76.8108%2089.0652%2083.7375%2077.2947%2083.7375%2063C83.7375%2039.3549%2068.7013%2023.575%2051.5%2023.575C34.8744%2023.575%2019.2625%2039.3543%2019.2625%2063C19.2625%2077.2947%2026.1892%2089.0652%2033.6154%2097.5771C41.0418%20106.089%2048.9716%20111.347%2050.987%20112.617C51.3125%20112.822%2051.6875%20112.822%2052.013%20112.617Z'%20fill='%23222222'%20stroke='%23222222'%20stroke-width='0.1'/%3e%3cpath%20d='M68.1667%2063C68.1667%2074.4208%2060.6152%2083.5%2051.5%2083.5C42.3847%2083.5%2034.8333%2074.4208%2034.8333%2063C34.8333%2051.5792%2042.3847%2042.5%2051.5%2042.5C60.6152%2042.5%2068.1667%2051.5792%2068.1667%2063Z'%20fill='white'%20stroke='white'/%3e%3cellipse%20cx='51.5'%20cy='62.5'%20rx='24.5'%20ry='29.5'%20fill='white'/%3e%3cpath%20d='M51.0318%2040.9482C50.9219%2040.9704%2050.8156%2041.0144%2050.7224%2041.0809C50.5358%2041.2131%2050.4139%2041.4192%2050.3875%2041.6467C50.3786%2041.7262%2049.4026%2049.7731%2044.8221%2062.1051C44.7639%2062.2618%2044.6949%2062.4383%2044.6179%2062.6284L49.9036%2065.7483C50.6604%2064.9214%2051.0159%2065.0435%2051.0215%2065.0449C55.1367%2066.8036%2055.968%2067.1868%2055.976%2067.1899C56.1695%2067.2798%2056.3924%2067.2896%2056.5936%2067.2163L56.5966%2067.2152C56.799%2067.1407%2058.9104%2067.4119%2059%2067.2163C64.2026%2055.9297%2064.5847%2044.8136%2064.6087%2044.707C64.6328%2044.6005%2064.4271%2043.8478%2063.9939%2043.7515L51.3653%2040.9507C51.2544%2040.9259%2051.1418%2040.9259%2051.0318%2040.9482ZM53.3276%2045.2484C53.9563%2045.0196%2054.6519%2045.3428%2054.8801%2045.9698C55.1083%2046.5969%2054.7833%2047.2916%2054.1545%2047.5204C53.5258%2047.7492%2052.8303%2047.426%2052.6021%2046.799C52.3738%2046.1719%2052.6989%2045.4773%2053.3276%2045.2484ZM43.9773%2064.1263C42.6045%2067.2229%2040.2438%2072.0423%2038.8382%2074.9116C38.2666%2076.0794%2037.8307%2076.9675%2037.644%2077.3665C37.3112%2078.0777%2037.4434%2078.8152%2038.02%2079.4424C39.2995%2080.8361%2042.9664%2081.6104%2043.6794%2081.3509C44.6263%2081.0062%2044.6642%2080.0319%2044.7081%2078.9027C44.7638%2077.4965%2044.8479%2075.3706%2046.2108%2072.4594L46.4246%2071.9946C46.7403%2071.3051%2047.3024%2070.0823%2047.6514%2069.3755C48.136%2068.3938%2048.5611%2067.642%2048.936%2067.0536L43.9773%2064.1263Z'%20fill='%23222222'/%3e%3c/svg%3e";!function(t){function e(t,e){var n=e.x-t.x,s=e.y-t.y;return Math.sqrt(n*n+s*s)}t=t&&t.hasOwnProperty("default")?t.default:t;var n=function(t,e){return(180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI+90+360)%360},s=function(t,e){var n=t.value;return t.isInPixels?n/e:n};function i(t){if("string"==typeof t&&-1!==t.indexOf("%"))return{value:parseFloat(t)/100,isInPixels:!1};var e=t?parseFloat(t):0;return{value:e,isInPixels:e>0}}var o,r,a,l=function(t,e){return t.x===e.x&&t.y===e.y};function d(t){return t.reduce((function(t,s,i,o){if(i>0&&!l(s,o[i-1])){var r=o[i-1],a=t.length>0?t[t.length-1].distB:0,d=e(r,s);t.push({a:r,b:s,distA:a,distB:a+d,heading:n(r,s)})}return t}),[])}function c(t,e){var n=d(t),i=n.length;if(0===i)return[];var o=n[i-1].distB,r=s(e.offset,o),a=s(e.endOffset,o),l=o*s(e.repeat,o),c=a>0?o*a:0,u=[],h=r>0?o*r:0;do{u.push(h),h+=l}while(l>0&&h<o-c);var g=0,f=n[0];return u.map((function(t){for(;t>f.distB&&g<i-1;)g++,f=n[g];var e=(t-f.distA)/(f.distB-f.distA);return{pt:p(f.a,f.b,e),heading:f.heading}}))}function p(t,e,n){return e.x!==t.x?{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}:{x:t.x,y:t.y+(e.y-t.y)*n}}o=L.Marker.prototype._initIcon,r=L.Marker.prototype._setPos,a="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook((function(){var t=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;t&&(t=t[0]+"px "+t[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||t||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",(function(t){t.target._applyRotation()}))})),L.Marker.include({_initIcon:function(){o.call(this)},_setPos:function(t){r.call(this,t),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,a?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(t){return this.options.rotationAngle=t,this.update(),this},setRotationOrigin:function(t){return this.options.rotationOrigin=t,this.update(),this}}),t.Symbol=t.Symbol||{},t.Symbol.Dash=t.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(e){t.Util.setOptions(this,e),this.options.pathOptions.clickable=!1},buildSymbol:function(e,n,s,i,o){var r=this.options,a=Math.PI/180;if(r.pixelSize<=1)return t.polyline([e.latLng,e.latLng],r.pathOptions);var l=s.project(e.latLng),d=-(e.heading-90)*a,c=t.point(l.x+r.pixelSize*Math.cos(d+Math.PI)/2,l.y+r.pixelSize*Math.sin(d)/2),p=l.add(l.subtract(c));return t.polyline([s.unproject(c),s.unproject(p)],r.pathOptions)}}),t.Symbol.dash=function(e){return new t.Symbol.Dash(e)},t.Symbol.ArrowHead=t.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(e){t.Util.setOptions(this,e),this.options.pathOptions.clickable=!1},buildSymbol:function(e,n,s,i,o){return this.options.polygon?t.polygon(this._buildArrowPath(e,s),this.options.pathOptions):t.polyline(this._buildArrowPath(e,s),this.options.pathOptions)},_buildArrowPath:function(e,n){var s=Math.PI/180,i=n.project(e.latLng),o=-(e.heading-90)*s,r=this.options.headAngle/2*s,a=o+r,l=o-r,d=t.point(i.x-this.options.pixelSize*Math.cos(a),i.y+this.options.pixelSize*Math.sin(a)),c=t.point(i.x-this.options.pixelSize*Math.cos(l),i.y+this.options.pixelSize*Math.sin(l));return[n.unproject(d),e.latLng,n.unproject(c)]}}),t.Symbol.arrowHead=function(e){return new t.Symbol.ArrowHead(e)},t.Symbol.Marker=t.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(e){t.Util.setOptions(this,e),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(e,n,s,i,o){return this.options.rotate&&(this.options.markerOptions.rotationAngle=e.heading+(this.options.angleCorrection||0)),t.marker(e.latLng,this.options.markerOptions)}}),t.Symbol.marker=function(e){return new t.Symbol.Marker(e)};var u=function(e){return e instanceof t.LatLng||Array.isArray(e)&&2===e.length&&"number"==typeof e[0]},h=function(t){return Array.isArray(t)&&u(t[0])};t.PolylineDecorator=t.FeatureGroup.extend({options:{patterns:[]},initialize:function(e,n){t.FeatureGroup.prototype.initialize.call(this),t.Util.setOptions(this,n),this._map=null,this._paths=this._initPaths(e),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(e,n){var s=this;return h(e)?[n?e.concat([e[0]]):e]:e instanceof t.Polyline?this._initPaths(e.getLatLngs(),e instanceof t.Polygon):Array.isArray(e)?e.reduce((function(t,e){return t.concat(s._initPaths(e,n))}),[]):[]},_initPatterns:function(t){return t.map(this._parsePatternDef)},setPatterns:function(t){this.options.patterns=t,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(t){this._paths=this._initPaths(t),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(t,e){return{symbolFactory:t.symbol,offset:i(t.offset),endOffset:i(t.endOffset),repeat:i(t.repeat)}},onAdd:function(t){this._map=t,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(e){this._map.off("moveend",this.redraw,this),this._map=null,t.FeatureGroup.prototype.onRemove.call(this,e)},_initBounds:function(){var e=this._paths.reduce((function(t,e){return t.concat(e)}),[]);return t.latLngBounds(e)},getBounds:function(){return this._bounds},_buildSymbols:function(t,e,n){var s=this;return n.map((function(i,o){return e.buildSymbol(i,t,s._map,o,n.length)}))},_getDirectionPoints:function(e,n){var s=this;return e.length<2?[]:c(e.map((function(t){return s._map.project(t)})),n).map((function(e){return{latLng:s._map.unproject(t.point(e.pt)),heading:e.heading}}))},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(e){var n=this,s=this._map.getBounds().pad(.1);return this._paths.map((function(i){var o=n._getDirectionPoints(i,e).filter((function(t){return s.contains(t.latLng)}));return t.featureGroup(n._buildSymbols(i,e.symbolFactory,o))}))},_draw:function(){var e=this;this._patterns.map((function(t){return e._getPatternLayers(t)})).forEach((function(n){e.addLayer(t.featureGroup(n))}))}}),t.polylineDecorator=function(e,n){return new t.PolylineDecorator(e,n)}}(d);!function(t,e,n,s){const i="tab",o=".bs.tab",r=`hide${o}`,a=`hidden${o}`,l=`show${o}`,d=`shown${o}`,c=`click${o}`,p=`keydown${o}`,u=`load${o}`,h="ArrowLeft",g="ArrowRight",f="ArrowUp",m="ArrowDown",b="Home",y="End",v="active",C="fade",_="show",x="dropdown",w=".dropdown-toggle",A=".dropdown-menu",k=`:not(${w})`,S='.list-group, .nav, [role="tablist"]',L=".nav-item, .list-group-item",$='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',O=`.nav-link${k}, .list-group-item${k}, [role="tab"]${k}, ${$}`,M=`.${v}[data-bs-toggle="tab"], .${v}[data-bs-toggle="pill"], .${v}[data-bs-toggle="list"]`;class j extends t{constructor(t){super(t),this._parent=this._element.closest(S),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),e.on(this._element,p,(t=>this._keydown(t))))}static get NAME(){return i}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),s=n?e.trigger(n,r,{relatedTarget:t}):null;e.trigger(t,l,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,s){if(!t)return;t.classList.add(v),this._activate(n.getElementFromSelector(t));const i=()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),e.trigger(t,d,{relatedTarget:s})):t.classList.add(_)};this._queueCallback(i,t,t.classList.contains(C))}_deactivate(t,s){if(!t)return;t.classList.remove(v),t.blur(),this._deactivate(n.getElementFromSelector(t));const i=()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),e.trigger(t,a,{relatedTarget:s})):t.classList.remove(_)};this._queueCallback(i,t,t.classList.contains(C))}_keydown(t){if(![h,g,f,m,b,y].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!s.isDisabled(t)));let n;if([b,y].includes(t.key))n=e[t.key===b?0:e.length-1];else{const i=[g,m].includes(t.key);n=s.getNextActiveElement(e,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),j.getOrCreateInstance(n).show())}_getChildren(){return n.find(O,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=n.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const s=this._getOuterElement(t);if(!s.classList.contains(x))return;const i=(t,i)=>{const o=n.findOne(t,s);o&&o.classList.toggle(i,e)};i(w,v),i(A,_),s.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(v)}_getInnerElement(t){return t.matches(O)?t:n.findOne(O,t)}_getOuterElement(t){return t.closest(L)||t}static jQueryInterface(t){return this.each((function(){const e=j.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}e.on(document,c,$,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),s.isDisabled(this)||j.getOrCreateInstance(this).show()})),e.on(window,u,(()=>{for(const t of n.find(M))j.getOrCreateInstance(t)})),s.defineJQueryPlugin(j)}(e(),n(),s(),i());const k=o.memo((({checkedLayers:t,useCountyandHotspotLayers:e,setOpenSideBar:n,openSideBar:s,RiskLayers:i,CountyLayers:o,HotspotLayers:k})=>{const L=r.useRef(),O=a((t=>t.movement.cattleMovementDataset)),M=a((t=>t.movement.secondMovementDataset)),j=O.move?Object.values(O.move):[],I=j.map((t=>[t.lat,t.lon])),P=M.move?Object.values(M.move):[],D=P.map((t=>[t.lat,t.lon])),R={holding:new d.Icon({iconUrl:_,iconSize:[40,40],iconAnchor:[20,35]}),showground:new d.Icon({iconUrl:x,iconSize:[40,40],iconAnchor:[20,35]}),market:new d.Icon({iconUrl:w,iconSize:[40,40],iconAnchor:[20,35]}),slaughterhouse:new d.Icon({iconUrl:A,iconSize:[40,40],iconAnchor:[20,35]})},F=t=>{let e=t.type;return"Agricultural Holding"===e?R.holding:"Market"===e?R.market:"Slaughterhouse (Red Meat)"===e?R.slaughterhouse:"Showground"===e?R.showground:R.holding},B=t=>new d.divIcon({html:`<span class="cluster-icon">${t.getChildCount()}</span>`,className:"cluster-icon",iconSize:[30,30]}),E=function(t,e,n,s){return`\n    <div class="fs-5 fw-bold">${t.identifier}</div><br>\n    <div>\n      <nav>\n        <div class="nav nav-tabs" id="popupNav" role="tablist">\n          <button class="nav-link active" id="navSummary" data-bs-toggle="tab" data-bs-target="#navSummaryContent${n}${s}" type="button" role="tab" aria-controls="navSummaryContent" aria-selected="true">Summary</button>\n          <button class="nav-link" id="navInfo" data-bs-toggle="tab" data-bs-target="#navInfoContent${n}${s}" type="button" role="tab" aria-controls="navInfoContent" aria-selected="false">Animal</button>\n        </div>\n      </nav>\n      <div class="tab-content" id="popTabContent">     \n        <div class="tab-pane fade show active" id="navSummaryContent${n}${s}" role="tabpanel" aria-labelledby="navSummary" tabindex="0">\n          <table class="table table-striped">\n            <tbody>\n              <tr>\n                <td><strong>Movement:</strong></td>\n                <td>${n+1} of ${e.length}</td>\n              </tr>\n              <tr>\n                <td><strong>Duration of Stay:</strong></td>\n                <td>${e[n].stay_length<=30?`${e[n].stay_length} days`:e[n].stay_length>30&&e[n].stay_length<=365?`${(e[n].stay_length/7).toFixed(0)} weeks`:`${(e[n].stay_length/365).toFixed(1)} years`}\n                </td> \n              </tr>\n              <tr>\n                <td><strong>Date of Arrival:</strong></td>\n                <td>${e[n].on_date}</td> \n              </tr>\n              <tr>\n                <td><strong>Date of Departure:</strong></td>\n                <td>${e[n].off_date}</td> \n              </tr>\n              <tr>\n                <td><strong>Species:</strong></td>\n                <td>${"COW"===t.species?"Bovine":t.species}</td>\n              </tr>\n              <tr>\n                <td><strong>Precise Location:</strong></td>\n                <td>${e[n].cph}</td>\n              </tr>\n              <tr>\n                <td><strong>Precise Location Type:</strong></td>\n                <td>${e[n].type}</td>\n              </tr>\n              <tr>\n                <td><strong>OS Map Reference:</strong></td>\n                <td>${e[n].os_map_ref}</td>\n              </tr>\n              <tr>\n                <td><strong>Submission:</strong></td>\n                <td>${t.submission}</td> \n              </tr>\n              <tr>\n                <td><strong>County:</strong></td>\n                <td>${e[n].county}</td>\n              </tr>\n              <tr>\n                <td><strong>Clade:</strong></td>\n                <td>${t.clade}</td>\n              </tr>\n              <tr>\n                <td><strong>Out of Home Range:</strong></td>\n                <td>${"N"===t.out_of_homerange?"No":"Yes"}</td>\n              </tr>\n              <tr>\n                <td><strong>Risk Area:</strong></td>\n                <td>${e[n].risk_area_current}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div class="tab-pane fade show" id="navInfoContent${n}${s}" role="tabpanel" aria-labelledby="navInfo" tabindex="0">\n          <table class="table table-striped">\n            <tbody>\n              <tr>\n                <td><strong>Birth Location:</strong></td>\n                <td>${e[0].cph}</td>\n              </tr>\n              <tr>\n                <td><strong>Date of Birth:</strong></td>\n                <td>${t.dob}</td>\n              </tr>\n              <tr>\n                <td><strong>Slaughter Date:</strong></td>\n                <td>${t.slaughter_date}</td>\n              </tr>\n              <tr>\n                <td><strong>Sex:</strong></td>\n                <td>${"F"===t.sex?"Female":"M"===t.sex?"Male":"Unknown"}</td>\n              </tr> \n              <tr>\n                <td><strong>Disclosing Test Type:</strong></td>\n                <td>${t.disclosing_test}</td>\n              </tr> \n              <tr>\n                <td><strong>Import Country:</strong></td>\n                <td>${null==t.import_country?"British":`${t.import_country}`}</td>\n              </tr> \n            </tbody>\n          </table>\n        </div>\n      </div>           \n    `},z={maxWidth:400,className:"cattlePopup",autoClose:!1,closeOnClick:!1},T=()=>{const t=c();r.useEffect((()=>{const e=p.control({position:"topright"});return e.onAdd=()=>{const t=p.DomUtil.create("div","leaflet-control leaflet-bar");return t.insertAdjacentHTML("afterbegin",`<div class="icons-legend"> <span class="fs-6" style="padding-left:6px;"><strong>Legend</strong></span>\n            <span style="display: flex; align-items: center;">\n            <img src=${_} class="legend-marker-img">\n            <span>Holding</span>\n          </span>\n          <span style="display: flex; align-items: center;">\n          <img src=${w} class="legend-marker-img">\n          <span>Market</span>\n        </span>\n        <span style="display: flex; align-items: center;">\n        <img src=${x} class="legend-marker-img">\n        <span>Showground</span>\n        </span>\n        <span style="display: flex; align-items: center;">\n      <img src=${A} class="legend-marker-img">\n      <span>Slaughterhouse</span>\n      </span>\n      <span style="display: flex; align-items: center;">\n      <img src=${C} class="legend-marker-img">\n      <span>Movement cluster</span>\n      </span>\n      <span style="display: flex; align-items: center;">\n      <svg style="margin-left: 5px;" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#0096FF" class="bi bi-caret-right-fill" viewBox="0 0 16 16">\n        <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>\n      </svg>\n      <span  style="padding-left:10px;">Cattle movement lines</span>\n    </span>\n          </div>`),t},e.addTo(t),()=>{t.removeControl(e)}}))},N=t=>[{repeat:100,symbol:p.Symbol.arrowHead({pixelSize:15,polygon:!0,pathOptions:{stroke:!0,color:t}})}],H=N("#0096FF"),U=N("#cb181d"),Z=({patterns:t,color:e,position:n})=>{const s=c(),i=r.useRef(null),o=r.useRef([]);r.useEffect((()=>{if(!s)return;const r=p.polyline(n,{color:e}).addTo(s),a=p.polylineDecorator(r,{patterns:t}).addTo(s);return i.current=r,o.current=a,()=>{i.current&&(s.removeLayer(i.current),s.removeLayer(o.current))}}))};return l.jsx("div",{ref:L,children:l.jsxs(u,{center:[53.3781,-1],zoom:6,children:[l.jsx(h,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l.jsx($,{mapRef:L}),l.jsxs(r.Suspense,{fallback:l.jsx(l.Fragment,{}),children:[l.jsx(k,{isChecked:e.hotspotLayers}),l.jsx(o,{isChecked:e.countyLayers}),Object.keys(t).length>0&&l.jsx(i,{checkedLayers:t})]}),l.jsx(g,{}),l.jsx(S,{jsonData:O,secondJsonData:M}),l.jsx(f,{}),l.jsx(m,{setOpenSideBar:n,openSideBar:s,type:"movement"}),l.jsx(b,{}),I.concat(D).length>0&&l.jsx(T,{}),l.jsx(y,{chunkedLoading:!0,iconCreateFunction:B,maxClusterRadius:0,children:I.map(((t,e)=>l.jsx(v,{ref:t=>null==t?void 0:t.bindPopup(E(O,j,e,`firstMov-${e}`),z),position:t,icon:F(j[e]),children:l.jsx(Z,{patterns:H,color:"#0096FF",position:I},`decorator-${e}`)},`firstMov-${e}`)))}),l.jsx(y,{chunkedLoading:!0,iconCreateFunction:B,maxClusterRadius:0,children:D.map(((t,e)=>l.jsx(v,{ref:t=>null==t?void 0:t.bindPopup(E(M,P,e,`secondMov-${e}`),z),position:t,icon:F(P[e]),children:l.jsx(Z,{patterns:U,color:"#cb181d",position:D},`second-decorator-${e}`)},`secondMov-${e}`)))})]})})})),S=({jsonData:t,secondJsonData:e})=>{const n=c(),s=[...t.move?Object.values(t.move).map((t=>[t.lat,t.lon])):[],...e.move?Object.values(e.move).map((t=>[t.lat,t.lon])):[]];return r.useEffect((()=>{s.length>0&&n.fitBounds(p.latLngBounds(s).pad(.1))}),[t,e]),l.jsx(l.Fragment,{})},$=({mapRef:t})=>{const e=c(),n=new ResizeObserver((()=>{e&&t.current&&e.invalidateSize()}));r.useEffect((()=>(t.current&&n.observe(t.current),()=>{n.disconnect()})),[])};export{k as default};
