import{a as H,b as A,l as x,C as at,c as lt,d as q,e as J,u as E,L as g}from"./hooks-CVXybjej.js";import{r as v,R as N,g as ut,h as T,c as b}from"./index-DKEImzlO.js";function G(o,n){const s=v.useRef(n);v.useEffect(function(){n!==s.current&&o.attributionControl!=null&&(s.current!=null&&o.attributionControl.removeAttribution(s.current),n!=null&&o.attributionControl.addAttribution(n)),s.current=n},[o,n])}function ht(o,n,s){n.center!==s.center&&o.setLatLng(n.center),n.radius!=null&&n.radius!==s.radius&&o.setRadius(n.radius)}function R(o){function n(s,u){const{instance:d,context:t}=o(s).current;return v.useImperativeHandle(u,()=>d),s.children==null?null:N.createElement(H,{value:t},s.children)}return v.forwardRef(n)}function K(o){function n(s,u){const[d,t]=v.useState(!1),{instance:e}=o(s,t).current;v.useImperativeHandle(u,()=>e),v.useEffect(function(){d&&e.update()},[e,d,s.children]);const i=e._contentNode;return i?ut.createPortal(s.children,i):null}return v.forwardRef(n)}function Z(o){function n(s,u){const{instance:d}=o(s).current;return v.useImperativeHandle(u,()=>d),null}return v.forwardRef(n)}function W(o){return function(s){const u=A(),d=o(s,u),{instance:t}=d.current,e=v.useRef(s.position),{position:i}=s;return v.useEffect(function(){return t.addTo(u.map),function(){t.remove()}},[u.map,t]),v.useEffect(function(){i!=null&&i!==e.current&&(t.setPosition(i),e.current=i)},[t,i]),d}}function U(o,n){const s=v.useRef();v.useEffect(function(){return n!=null&&o.instance.on(n),s.current=n,function(){s.current!=null&&o.instance.off(s.current),s.current=null}},[o,n])}function I(o,n){const s=o.pane??n.pane;return s?{...o,pane:s}:o}function X(o,n){return function(u,d){const t=A(),e=o(I(u,t),t);return G(t.map,u.attribution),U(e.current,u.eventHandlers),n(e.current,t,u,d),e}}function Q(o){return o.split(" ").filter(Boolean)}function Y(o,n){Q(n).forEach(s=>{x.DomUtil.addClass(o,s)})}function $(o,n){Q(n).forEach(s=>{x.DomUtil.removeClass(o,s)})}function ct(o,n,s){o!=null&&s!==n&&(n!=null&&n.length>0&&$(o,n),s!=null&&s.length>0&&Y(o,s))}function P(o,n,s){return Object.freeze({instance:o,context:n,container:s})}function w(o,n){return n==null?function(u,d){const t=v.useRef();return t.current||(t.current=o(u,d)),t}:function(u,d){const t=v.useRef();t.current||(t.current=o(u,d));const e=v.useRef(u),{instance:i}=t.current;return v.useEffect(function(){e.current!==u&&(n(i,u,e.current),e.current=u)},[i,u,d]),t}}function D(o,n){v.useEffect(function(){return(n.layerContainer??n.map).addLayer(o.instance),function(){var t;(t=n.layerContainer)==null||t.removeLayer(o.instance),n.map.removeLayer(o.instance)}},[n,o])}function j(o){return function(s){const u=A(),d=o(I(s,u),u);return G(u.map,s.attribution),U(d.current,s.eventHandlers),D(d.current,u),d}}function tt(o,n){const s=v.useRef();v.useEffect(function(){if(n.pathOptions!==s.current){const d=n.pathOptions??{};o.instance.setStyle(d),s.current=d}},[o,n])}function et(o){return function(s){const u=A(),d=o(I(s,u),u);return U(d.current,s.eventHandlers),D(d.current,u),tt(d.current,s),d}}function ft(o){function n(d,t){return P(o(d),t)}const s=w(n),u=W(s);return Z(u)}function it(o,n){const s=w(o,n),u=j(s);return R(u)}function dt(o,n){const s=w(o),u=X(s,n);return K(u)}function _t(o,n){const s=w(o,n),u=et(s);return R(u)}function nt(o,n){const s=w(o,n),u=j(s);return Z(u)}function rt(o,n,s){const{opacity:u,zIndex:d}=n;u!=null&&u!==s.opacity&&o.setOpacity(u),d!=null&&d!==s.zIndex&&o.setZIndex(d)}function pt(o,n,s){n.bounds instanceof x.LatLngBounds&&n.bounds!==s.bounds&&o.setBounds(n.bounds),n.opacity!=null&&n.opacity!==s.opacity&&o.setOpacity(n.opacity),n.zIndex!=null&&n.zIndex!==s.zIndex&&o.setZIndex(n.zIndex)}const mt=Object.freeze(Object.defineProperty({__proto__:null,CONTEXT_VERSION:at,LeafletContext:lt,LeafletProvider:H,addClassName:Y,createContainerComponent:R,createControlComponent:ft,createControlHook:W,createDivOverlayComponent:K,createDivOverlayHook:X,createElementHook:w,createElementObject:P,createLayerComponent:it,createLayerHook:j,createLeafComponent:Z,createLeafletContext:q,createOverlayComponent:dt,createPathComponent:_t,createPathHook:et,createTileLayerComponent:nt,extendContext:J,removeClassName:$,updateCircle:ht,updateClassName:ct,updateGridLayer:rt,updateMediaOverlay:pt,useAttribution:G,useEventHandlers:U,useLayerLifecycle:D,useLeafletContext:A,usePathOptions:tt,withPane:I},Symbol.toStringTag,{value:"Module"}));function B(){return B=Object.assign||function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])}return o},B.apply(this,arguments)}function gt({bounds:o,boundsOptions:n,center:s,children:u,className:d,id:t,placeholder:e,style:i,whenReady:r,zoom:a,...h},l){const[f]=v.useState({className:d,id:t,style:i}),[c,_]=v.useState(null);v.useImperativeHandle(l,()=>(c==null?void 0:c.map)??null,[c]);const p=v.useCallback(m=>{if(m!==null&&c===null){const C=new x.Map(m,h);s!=null&&a!=null?C.setView(s,a):o!=null&&C.fitBounds(o,n),r!=null&&C.whenReady(r),_(q(C))}},[]);v.useEffect(()=>()=>{c==null||c.map.remove()},[c]);const y=c?N.createElement(H,{value:c},u):e??null;return N.createElement("div",B({},f,{ref:p}),y)}const zt=v.forwardRef(gt),Ht=it(function({position:n,...s},u){const d=new x.Marker(n,s);return P(d,J(u,{overlayContainer:d}))},function(n,s,u){s.position!==u.position&&n.setLatLng(s.position),s.icon!=null&&s.icon!==u.icon&&n.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==u.zIndexOffset&&n.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==u.opacity&&n.setOpacity(s.opacity),n.dragging!=null&&s.draggable!==u.draggable&&(s.draggable===!0?n.dragging.enable():n.dragging.disable())}),Gt=nt(function({url:n,...s},u){const d=new x.TileLayer(n,I(s,u));return P(d,u)},function(n,s,u){rt(n,s,u);const{url:d}=s;d!=null&&d!==u.url&&n.setUrl(d)});var st={};const vt=T(mt);var V={exports:{}};(function(o,n){(function(s,u){u(n)})(b,function(s){var u=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i=this._featureGroup,r=this._nonPointGroup,a=this.options.chunkedLoading,h=this.options.chunkInterval,l=this.options.chunkProgress,f=t.length,c=0,_=!0,p;if(this._map){var y=new Date().getTime(),m=L.bind(function(){var M=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();c<f;c++){if(a&&c%200===0){var O=new Date().getTime()-M;if(O>h)break}if(p=t[c],p instanceof L.LayerGroup){_&&(t=t.slice(),_=!1),this._extractNonGroupLayers(p,t),f=t.length;continue}if(!p.getLatLng){r.addLayer(p),e||this.fire("layeradd",{layer:p});continue}if(!this.hasLayer(p)&&(this._addLayer(p,this._maxZoom),e||this.fire("layeradd",{layer:p}),p.__parent&&p.__parent.getChildCount()===2)){var k=p.__parent.getAllChildMarkers(),ot=k[0]===p?k[1]:k[0];i.removeLayer(ot)}}l&&l(c,f,new Date().getTime()-y),c===f?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(m,this.options.chunkDelay)},this);m()}else for(var C=this._needsClustering;c<f;c++){if(p=t[c],p instanceof L.LayerGroup){_&&(t=t.slice(),_=!1),this._extractNonGroupLayers(p,t),f=t.length;continue}if(!p.getLatLng){r.addLayer(p);continue}this.hasLayer(p)||C.push(p)}return this},removeLayers:function(t){var e,i,r=t.length,a=this._featureGroup,h=this._nonPointGroup,l=!0;if(!this._map){for(e=0;e<r;e++){if(i=t[e],i instanceof L.LayerGroup){l&&(t=t.slice(),l=!1),this._extractNonGroupLayers(i,t),r=t.length;continue}this._arraySplice(this._needsClustering,i),h.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i})}return this}if(this._unspiderfy){this._unspiderfy();var f=t.slice(),c=r;for(e=0;e<c;e++){if(i=f[e],i instanceof L.LayerGroup){this._extractNonGroupLayers(i,f),c=f.length;continue}this._unspiderfyLayer(i)}}for(e=0;e<r;e++){if(i=t[e],i instanceof L.LayerGroup){l&&(t=t.slice(),l=!1),this._extractNonGroupLayers(i,t),r=t.length;continue}if(!i.__parent){h.removeLayer(i),this.fire("layerremove",{layer:i});continue}this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),a.hasLayer(i)&&(a.removeLayer(i),i.clusterShow&&i.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i=this._needsClustering.slice(),r=this._needsRemoving,a,h,l;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(i),h=i.length-1;h>=0;h--){for(a=!0,l=r.length-1;l>=0;l--)if(r[l].layer===i[h]){a=!1;break}a&&t.call(e,i[h])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(i){L.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(i=this._needsRemoving,e=i.length-1;e>=0;e--)if(i[e].layer===t)return!1;return!!(t.__parent&&t.__parent._group===this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=this._map;typeof e!="function"&&(e=function(){});var r=function(){(i.hasLayer(t)||i.hasLayer(t.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",r,this),this.off("animationend",r,this),i.hasLayer(t)?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",r,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",r,this),this.on("animationend",r,this),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var e,i,r;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)r=this._needsRemoving[e],r.newlatlng=r.layer._latlng,r.layer._latlng=r.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)r=this._needsRemoving[e],this._removeLayer(r.layer,!0),r.layer._latlng=r.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,r=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());e>=a&&r[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var r=this._gridClusters,a=this._gridUnclustered,h=this._featureGroup,l=this._map,f=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var c=t.__parent,_=c._markers,p;for(this._arraySplice(_,t);c&&(c._childCount--,c._boundsNeedUpdate=!0,!(c._zoom<f));)e&&c._childCount<=1?(p=c._markers[0]===t?c._markers[1]:c._markers[0],r[c._zoom].removeObject(c,l.project(c._cLatLng,c._zoom)),a[c._zoom].addObject(p,l.project(p.getLatLng(),c._zoom)),this._arraySplice(c.__parent._childClusters,c),c.__parent._markers.push(p),p.__parent=c.__parent,c._icon&&(h.removeLayer(c),i||h.addLayer(p))):c._iconNeedsUpdate=!0,c=c.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return e<10?i+="small":e<100?i+="medium":i+="large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,r=this.options.zoomToBoundsOnClick,a=this.options.spiderfyOnEveryZoom;(e||r||a)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=t.layer,i=e;if(!(t.type==="clusterkeypress"&&t.originalEvent&&t.originalEvent.keyCode!==13)){for(;i._childClusters.length===1;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),this.options.spiderfyOnEveryZoom&&e.spiderfy(),t.originalEvent&&t.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,r=this.options.spiderfyOnEveryZoom,a=this._map;(t||i||r)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),a.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,r=i;typeof i!="function"&&(r=function(){return i}),this.options.disableClusteringAtZoom!==null&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var a=t;a>=e;a--)this._gridClusters[a]=new L.DistanceGrid(r(a)),this._gridUnclustered[a]=new L.DistanceGrid(r(a));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i=this._gridClusters,r=this._gridUnclustered,a=Math.floor(this._map.getMinZoom()),h,l;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=a;e--){h=this._map.project(t.getLatLng(),e);var f=i[e].getNearObject(h);if(f){f._addChild(t),t.__parent=f;return}if(f=r[e].getNearObject(h),f){var c=f.__parent;c&&this._removeLayer(f,!1);var _=new this._markerCluster(this,e,f,t);i[e].addObject(_,this._map.project(_._cLatLng,e)),f.__parent=_,t.__parent=_;var p=_;for(l=e-1;l>c._zoom;l--)p=new this._markerCluster(this,l,p),i[l].addObject(p,this._map.project(f.getLatLng(),l));c._addChild(p),this._removeFromGridUnclustered(f,e);return}r[e].addObject(t,h)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(t){var e=this._maxLat;return e!==void 0&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(e._childCount===2){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i=t.getLayers(),r=0,a;for(e=e||[];r<i.length;r++){if(a=i[r],a instanceof L.LayerGroup){this._extractNonGroupLayers(a,e);continue}e.push(a)}return e},_overrideMarkerIcon:function(t){var e=t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}});return e}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i=this._getExpandedVisibleBounds(),r=this._featureGroup,a=Math.floor(this._map.getMinZoom()),h;this._ignoreMove=!0,this._topClusterLevel._recursively(i,t,a,function(l){var f=l._latlng,c=l._markers,_;for(i.contains(f)||(f=null),l._isSingleParent()&&t+1===e?(r.removeLayer(l),l._recursivelyAddChildrenToMap(null,e,i)):(l.clusterHide(),l._recursivelyAddChildrenToMap(f,e,i)),h=c.length-1;h>=0;h--)_=c[h],i.contains(_._latlng)||r.removeLayer(_)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,e),r.eachLayer(function(l){!(l instanceof L.MarkerCluster)&&l._icon&&l.clusterShow()}),this._topClusterLevel._recursively(i,t,e,function(l){l._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(i,t,a,function(l){r.removeLayer(l),l.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,r=this._featureGroup;r.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){r.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var r=this._getExpandedVisibleBounds(),a=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(r,a,e+1,i);var h=this;this._forceLayout(),t._recursivelyBecomeVisible(r,i),this._enqueue(function(){if(t._childCount===1){var l=t._markers[0];this._ignoreMove=!0,l.setLatLng(l.getLatLng()),this._ignoreMove=!1,l.clusterShow&&l.clusterShow()}else t._recursively(r,i,a,function(f){f._recursivelyRemoveChildrenFromMap(r,a,e+1)});h._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var d=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,r){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),r&&this._addChild(r)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(t,e);for(var r=this._markers.length-1;r>=0;r--)e&&this._markers[r].__dragStart||t.push(this._markers[r]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e=this._childClusters.slice(),i=this._group._map,r=i.getBoundsZoom(this._bounds),a=this._zoom+1,h=i.getZoom(),l;e.length>0&&r>a;){a++;var f=[];for(l=0;l<e.length;l++)f=f.concat(e[l]._childClusters);e=f}r>a?this._group._map.setView(this._latlng,a):r<=h?this._group._map.setView(this._latlng,h+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t=this._markers,e=this._childClusters,i=0,r=0,a=this._childCount,h,l,f,c;if(a!==0){for(this._resetBounds(),h=0;h<t.length;h++)f=t[h]._latlng,this._bounds.extend(f),i+=f.lat,r+=f.lng;for(h=0;h<e.length;h++)l=e[h],l._boundsNeedUpdate&&l._recalculateBounds(),this._bounds.extend(l._bounds),f=l._wLatLng,c=l._childCount,i+=f.lat*c,r+=f.lng*c;this._latlng=this._wLatLng=new L.LatLng(i/a,r/a),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,function(r){var a=r._markers,h,l;for(h=a.length-1;h>=0;h--)l=a[h],l._icon&&(l._setPos(e),l.clusterHide())},function(r){var a=r._childClusters,h,l;for(h=a.length-1;h>=0;h--)l=a[h],l._icon&&(l._setPos(e),l.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,r){this._recursively(t,r,e,function(a){a._recursivelyAnimateChildrenIn(t,a._group._map.latLngToLayerPoint(a.getLatLng()).round(),i),a._isSingleParent()&&i-1===r?(a.clusterShow(),a._recursivelyRemoveChildrenFromMap(t,e,i)):a.clusterHide(),a._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(i){i.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,function(r){if(e!==r._zoom)for(var a=r._markers.length-1;a>=0;a--){var h=r._markers[a];i.contains(h._latlng)&&(t&&(h._backupLatlng=h.getLatLng(),h.setLatLng(t),h.clusterHide&&h.clusterHide()),r._group._featureGroup.addLayer(h))}},function(r){r._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var r=this._childClusters.length-1;r>=0;r--)this._childClusters[r]._restorePosition();else for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,r){var a,h;this._recursively(t,e-1,i-1,function(l){for(h=l._markers.length-1;h>=0;h--)a=l._markers[h],(!r||!r.contains(a._latlng))&&(l._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())},function(l){for(h=l._childClusters.length-1;h>=0;h--)a=l._childClusters[h],(!r||!r.contains(a._latlng))&&(l._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())})},_recursively:function(t,e,i,r,a){var h=this._childClusters,l=this._zoom,f,c;if(e<=l&&(r&&r(this),a&&l===i&&a(this)),l<e||l<i)for(f=h.length-1;f>=0;f--)c=h[f],c._boundsNeedUpdate&&c._recalculateBounds(),t.intersects(c._bounds)&&c._recursively(t,e,i,r,a)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),r=this._getCoord(e.y),a=this._grid,h=a[r]=a[r]||{},l=h[i]=h[i]||[],f=L.Util.stamp(t);this._objectPoint[f]=e,l.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i=this._getCoord(e.x),r=this._getCoord(e.y),a=this._grid,h=a[r]=a[r]||{},l=h[i]=h[i]||[],f,c;for(delete this._objectPoint[L.Util.stamp(t)],f=0,c=l.length;f<c;f++)if(l[f]===t)return l.splice(f,1),c===1&&delete h[i],!0},eachObject:function(t,e){var i,r,a,h,l,f,c,_=this._grid;for(i in _){l=_[i];for(r in l)for(f=l[r],a=0,h=f.length;a<h;a++)c=t.call(e,f[a]),c&&(a--,h--)}},getNearObject:function(t){var e=this._getCoord(t.x),i=this._getCoord(t.y),r,a,h,l,f,c,_,p,y=this._objectPoint,m=this._sqCellSize,C=null;for(r=i-1;r<=i+1;r++)if(l=this._grid[r],l){for(a=e-1;a<=e+1;a++)if(f=l[a],f)for(h=0,c=f.length;h<c;h++)_=f[h],p=this._sqDist(y[L.Util.stamp(_)],t),(p<m||p<=m&&C===null)&&(m=p,C=_)}return C},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,r=e.y-t.y;return i*i+r*r}},function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat,r=e[0].lng-e[1].lng;return r*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i=0,r=null,a=[],h,l,f;for(h=e.length-1;h>=0;h--){if(l=e[h],f=this.getDistant(l,t),f>0)a.push(l);else continue;f>i&&(i=f,r=l)}return{maxPoint:r,newPoints:a}},buildConvexHull:function(t,e){var i=[],r=this.findMostDistantPointFromBaseLine(t,e);return r.maxPoint?(i=i.concat(this.buildConvexHull([t[0],r.maxPoint],r.newPoints)),i=i.concat(this.buildConvexHull([r.maxPoint,t[1]],r.newPoints)),i):[t[0]]},getConvexHull:function(t){var e=!1,i=!1,r=!1,a=!1,h=null,l=null,f=null,c=null,_=null,p=null,y;for(y=t.length-1;y>=0;y--){var m=t[y];(e===!1||m.lat>e)&&(h=m,e=m.lat),(i===!1||m.lat<i)&&(l=m,i=m.lat),(r===!1||m.lng>r)&&(f=m,r=m.lng),(a===!1||m.lng<a)&&(c=m,a=m.lng)}i!==e?(p=l,_=h):(p=c,_=f);var C=[].concat(this.buildConvexHull([p,_],t),this.buildConvexHull([_,p],t));return C}}}(),L.MarkerCluster.include({getConvexHull:function(){var t=this.getAllChildMarkers(),e=[],i,r;for(r=t.length-1;r>=0;r--)i=t[r].getLatLng(),e.push(i);return L.QuickHull.getConvexHull(e)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var t=this.getAllChildMarkers(null,!0),e=this._group,i=e._map,r=i.latLngToLayerPoint(this._latlng),a;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?a=this._group.options.spiderfyShapePositions(t.length,r):t.length>=this._circleSpiralSwitchover?a=this._generatePointsSpiral(t.length,r):(r.y+=10,a=this._generatePointsCircle(t.length,r)),this._animationSpiderfy(t,a)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),r=i/this._2PI,a=this._2PI/t,h=[],l,f;for(r=Math.max(r,35),h.length=t,l=0;l<t;l++)f=this._circleStartAngle+l*a,h[l]=new L.Point(e.x+r*Math.cos(f),e.y+r*Math.sin(f))._round();return h},_generatePointsSpiral:function(t,e){var i=this._group.options.spiderfyDistanceMultiplier,r=i*this._spiralLengthStart,a=i*this._spiralFootSeparation,h=i*this._spiralLengthFactor*this._2PI,l=0,f=[],c;for(f.length=t,c=t;c>=0;c--)c<t&&(f[c]=new L.Point(e.x+r*Math.cos(l),e.y+r*Math.sin(l))._round()),l+=a/r+c*5e-4,r+=h/l;return f},_noanimationUnspiderfy:function(){var t=this._group,e=t._map,i=t._featureGroup,r=this.getAllChildMarkers(null,!0),a,h;for(t._ignoreMove=!0,this.setOpacity(1),h=r.length-1;h>=0;h--)a=r[h],i.removeLayer(a),a._preSpiderfyLatlng&&(a.setLatLng(a._preSpiderfyLatlng),delete a._preSpiderfyLatlng),a.setZIndexOffset&&a.setZIndexOffset(0),a._spiderLeg&&(e.removeLayer(a._spiderLeg),delete a._spiderLeg);t.fire("unspiderfied",{cluster:this,markers:r}),t._ignoreMove=!1,t._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i=this._group,r=i._map,a=i._featureGroup,h=this._group.options.spiderLegPolylineOptions,l,f,c,_;for(i._ignoreMove=!0,l=0;l<t.length;l++)_=r.layerPointToLatLng(e[l]),f=t[l],c=new L.Polyline([this._latlng,_],h),r.addLayer(c),f._spiderLeg=c,f._preSpiderfyLatlng=f._latlng,f.setLatLng(_),f.setZIndexOffset&&f.setZIndexOffset(1e6),a.addLayer(f);this.setOpacity(.3),i._ignoreMove=!1,i.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i=this,r=this._group,a=r._map,h=r._featureGroup,l=this._latlng,f=a.latLngToLayerPoint(l),c=L.Path.SVG,_=L.extend({},this._group.options.spiderLegPolylineOptions),p=_.opacity,y,m,C,M,O,k;for(p===void 0&&(p=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),c?(_.opacity=0,_.className=(_.className||"")+" leaflet-cluster-spider-leg"):_.opacity=p,r._ignoreMove=!0,y=0;y<t.length;y++)m=t[y],k=a.layerPointToLatLng(e[y]),C=new L.Polyline([l,k],_),a.addLayer(C),m._spiderLeg=C,c&&(M=C._path,O=M.getTotalLength()+.1,M.style.strokeDasharray=O,M.style.strokeDashoffset=O),m.setZIndexOffset&&m.setZIndexOffset(1e6),m.clusterHide&&m.clusterHide(),h.addLayer(m),m._setPos&&m._setPos(f);for(r._forceLayout(),r._animationStart(),y=t.length-1;y>=0;y--)k=a.layerPointToLatLng(e[y]),m=t[y],m._preSpiderfyLatlng=m._latlng,m.setLatLng(k),m.clusterShow&&m.clusterShow(),c&&(C=m._spiderLeg,M=C._path,M.style.strokeDashoffset=0,C.setStyle({opacity:p}));this.setOpacity(.3),r._ignoreMove=!1,setTimeout(function(){r._animationEnd(),r.fire("spiderfied",{cluster:i,markers:t})},200)},_animationUnspiderfy:function(t){var e=this,i=this._group,r=i._map,a=i._featureGroup,h=t?r._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):r.latLngToLayerPoint(this._latlng),l=this.getAllChildMarkers(null,!0),f=L.Path.SVG,c,_,p,y,m,C;for(i._ignoreMove=!0,i._animationStart(),this.setOpacity(1),_=l.length-1;_>=0;_--)c=l[_],c._preSpiderfyLatlng&&(c.closePopup(),c.setLatLng(c._preSpiderfyLatlng),delete c._preSpiderfyLatlng,C=!0,c._setPos&&(c._setPos(h),C=!1),c.clusterHide&&(c.clusterHide(),C=!1),C&&a.removeLayer(c),f&&(p=c._spiderLeg,y=p._path,m=y.getTotalLength()+.1,y.style.strokeDashoffset=m,p.setStyle({opacity:0})));i._ignoreMove=!1,setTimeout(function(){var M=0;for(_=l.length-1;_>=0;_--)c=l[_],c._spiderLeg&&M++;for(_=l.length-1;_>=0;_--)c=l[_],c._spiderLeg&&(c.clusterShow&&c.clusterShow(),c.setZIndexOffset&&c.setZIndexOffset(0),M>1&&a.removeLayer(c),r.removeLayer(c._spiderLeg),delete c._spiderLeg);i._animationEnd(),i.fire("unspiderfied",{cluster:e,markers:l})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),s.MarkerClusterGroup=u,s.MarkerCluster=d,Object.defineProperty(s,"__esModule",{value:!0})})})(V,V.exports);const Lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",yt=Object.freeze(Object.defineProperty({__proto__:null,default:Lt},Symbol.toStringTag,{value:"Module"})),Ct=T(yt),Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",kt=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"})),bt=T(kt),xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",St=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"})),wt=T(St);var S=b&&b.__assign||function(){return S=Object.assign||function(o){for(var n,s=1,u=arguments.length;s<u;s++){n=arguments[s];for(var d in n)Object.prototype.hasOwnProperty.call(n,d)&&(o[d]=n[d])}return o},S.apply(this,arguments)},Ot=b&&b.__rest||function(o,n){var s={};for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&n.indexOf(u)<0&&(s[u]=o[u]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(o);d<u.length;d++)n.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(o,u[d])&&(s[u[d]]=o[u[d]]);return s},At=b&&b.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(st,"__esModule",{value:!0});var z=vt,F=At(x);delete F.default.Icon.Default.prototype._getIconUrl;F.default.Icon.Default.mergeOptions({iconRetinaUrl:Ct.default,iconUrl:bt.default,shadowUrl:wt.default});function It(o){var n={},s={};o.children;var u=Ot(o,["children"]);return Object.entries(u).forEach(function(d){var t,e,i=d[0],r=d[1];i.startsWith("on")?s=S(S({},s),(t={},t[i]=r,t)):n=S(S({},n),(e={},e[i]=r,e))}),{clusterProps:n,clusterEvents:s}}function Et(o,n){var s=It(o),u=s.clusterProps,d=s.clusterEvents,t=new F.default.MarkerClusterGroup(u);return Object.entries(d).forEach(function(e){var i=e[0],r=e[1],a="cluster".concat(i.substring(2).toLowerCase());t.on(a,r)}),(0,z.createElementObject)(t,(0,z.extendContext)(n,{layerContainer:t}))}var Tt=function(o,n,s){},Ut=(0,z.createPathComponent)(Et,Tt),Rt=st.default=Ut;const Zt=({setOpenSideBar:o,openSideBar:n})=>{const s=E();v.useEffect(()=>{const u=new g.Control({position:"topleft"});return u.onAdd=function(){const d=g.DomUtil.create("div","leaflet-control leaflet-bar");return d.setAttribute("id","btn__map-fullscreen"),d.onclick=function(){o(!n),s.invalidateSize()},n?d.insertAdjacentHTML("afterbegin",`<a id="toggle-sidebar" title="Hide sidebar">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
            <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"
            />
          </svg>
        </a>
              `):d.insertAdjacentHTML("afterbegin",`<a id="toggle-sidebar" title="Show sidebar">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"></path>
          <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"></path>
        </svg>
        </a>
              `),d},u.addTo(s),()=>{u.remove()}},[n])},Pt=g.Control.extend({options:{position:"topleft",unitSystem:"imperial",color:"#4D90FE",contrastingColor:"#fff",show_last_node:!1,show_azimut:!1},clickSpeed:200,onAdd:function(o){var n=g.DomUtil.create("div","leaflet-control leaflet-bar"),s=g.DomUtil.create("a","icon-ruler",n),u=o.getContainer(),d=this;s.href="#",s.title="Toggle measurement tool",g.DomEvent.on(s,"click",g.DomEvent.stop).on(s,"click",function(){g.DomUtil.hasClass(s,"icon-active")?(d.resetRuler(!!d.mainLayer),g.DomUtil.removeClass(s,"icon-active"),g.DomUtil.removeClass(u,"ruler-map")):(d.initRuler(),g.DomUtil.addClass(s,"icon-active"),g.DomUtil.addClass(u,"ruler-map"))});function t(a){return e(a)>=165?"000":"fff"}function e(a){var h=typeof a=="string"?i(a):a;return .2126*h[0]+.7152*h[1]+.0722*h[2]}function i(a){if(a.length===3)a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2);else if(a.length!==6)throw new Error("Invalid hex color: "+a);for(var h=[],l=0;l<=2;l++)h[l]=parseInt(a.substr(l*2,2),16);return h}this.options.color&&this.options.color.indexOf("#")===-1?this.options.color="#"+this.options.color:this.options.color||(this.options.color="#4D90FE");var r=this.options.color.replace("#","");return this.options.contrastingColor="#"+t(r),n},onRemove:function(o){this.resetRuler(!!this.mainLayer)},initRuler:function(){var o=this,n=this._map;this.mainLayer=g.featureGroup(),this.mainLayer.addTo(this._map),n.touchZoom.disable(),n.doubleClickZoom.disable(),n.boxZoom.disable(),n.keyboard.disable(),n.tap&&n.tap.disable(),this.dblClickEventFn=function(s){g.DomEvent.stop(s)},this.clickEventFn=function(s){o.clickHandle?(clearTimeout(o.clickHandle),o.clickHandle=0,o.options.show_last_node&&(o.preClick(s),o.getMouseClickHandler(s)),o.getDblClickHandler(s)):(o.preClick(s),o.clickHandle=setTimeout(function(){o.getMouseClickHandler(s),o.clickHandle=0},o.clickSpeed))},this.moveEventFn=function(s){o.clickHandle||o.getMouseMoveHandler(s)},n.on("click",this.clickEventFn,this),n.on("mousemove",this.moveEventFn,this),this.resetRuler()},initLayer:function(){this.layer=g.featureGroup(),this.layer.addTo(this.mainLayer),this.layer.on("selected",this.layerSelected),this.layer.on("click",this.clickEventFn,this)},resetRuler:function(o){var n=this._map;o&&(n.off("click",this.clickEventFn,this),n.off("mousemove",this.moveEventFn,this),this.mainLayer&&this._map.removeLayer(this.mainLayer),this.mainLayer=null,this._map.touchZoom.enable(),this._map.boxZoom.enable(),this._map.keyboard.enable(),this._map.tap&&this._map.tap.enable()),this.layer=null,this.prevLatlng=null,this.poly=null,this.multi=null,this.latlngs=null,this.latlngsList=[],this.sum=0,this.distance=0,this.separation=1,this.last=0,this.fixedLast=0,this.totalIcon=null,this.total=null,this.lastCircle=null,this.UNIT_CONV=1e3,this.SUB_UNIT_CONV=1e3,this.UNIT="km",this.SUB_UNIT="m",this.options.unitSystem==="imperial"&&(this.UNIT_CONV=1609.344,this.SUB_UNIT_CONV=5280,this.UNIT="mi",this.SUB_UNIT="ft"),this.measure={scalar:0,unit:this.SUB_UNIT}},cleanUpMarkers:function(o){var n=this.layer;n&&n.eachLayer(function(s){s.options&&s.options.type==="tmp"&&(o?s.options.type="fixed":n.removeLayer(s))})},cleanUpFixed:function(){var o=this.layer;o&&o.eachLayer(function(n){n.options&&n.options.type==="fixed"&&o.removeLayer(n)})},convertDots:function(){var o=this,n=this.layer;n&&n.eachLayer(function(s){if(s.options&&s.options.type==="dot"){var u=s.options.marker,d=u?u.options.icon.options:null,t=d?d.html:"";if(t&&t.indexOf(o.measure.unit)===-1){var e=s.options.label,i=e.split(" "),r=parseFloat(i[0]),a=i[1],h="";s.options.label.indexOf(o.measure.unit)!==-1?h=s.options.label:a===o.UNIT?h=(r*o.SUB_UNIT_CONV).toFixed(2)+" "+o.SUB_UNIT:a===o.SUB_UNIT&&(h=(r/o.SUB_UNIT_CONV).toFixed(2)+" "+o.UNIT);var l=g.divIcon({className:"total-popup-label",html:h});u.setIcon(l)}}})},displayMarkers:function(o,n,s){var u,d,t,e,i,r=o[o.length-1],a=o[0],h=a.distanceTo(r)/this.UNIT_CONV,l=h,f=this._map.latLngToContainerPoint(r),c=this._map.latLngToContainerPoint(a),_=1;this.measure.unit===this.SUB_UNIT&&(_=this.SUB_UNIT_CONV,l=l*_);for(var p=s*_+l,y=s*_,m=Math.floor(y);m<p;m++)e=(p-m)/l,!(m%this.separation||m<y)&&(u=f.x-e*(f.x-c.x),d=f.y-e*(f.y-c.y),i=g.point(u,d),r=this._map.containerPointToLatLng(i),t=m+" "+this.measure.unit,this.renderCircle(r,0,this.layer,n?"fixed":"tmp",t),this.last=p);return h},renderCircle:function(o,n,s,u,d){var t=this.options.color,e=this.options.color,i="",r="";u=u||"circle";var a={color:e,fillOpacity:1,opacity:1,fill:!0,type:u},h=this.prevLatlng&&this._map?this._map.latLngToContainerPoint(this.prevLatlng):null,l=this._map?this._map.latLngToContainerPoint(o):null;u==="dot"&&(r="node-label",h&&this.options.show_azimut&&(i=' <span class="azimut"> '+this.lastAzimut+"&deg;</span>"));var f=this._map.containerPointToLatLng(l);if(d){var c=g.divIcon({className:"total-popup-label "+r,html:'<span style="color: '+t+';">'+d+i+"</span>"});a.icon=c,a.marker=g.marker(f,{icon:c,type:u}).addTo(s),a.label=d}var _=g.circleMarker(o,a);return _.setRadius(3),_.addTo(s),_},getAzimut:function(o,n){var s=0;return o&&n&&(s=parseInt(Math.atan2(n.y-o.y,n.x-o.x)*180/Math.PI),s>0?s+=90:s<0&&(s=Math.abs(s),s<=90?s=90-s:s=360-(s-90))),this.lastAzimut=s,s},renderPolyline:function(o,n,s){var u=g.polyline(o,{color:this.options.color,weight:2,opacity:1,dashArray:n});return u.addTo(s),u},renderMultiPolyline:function(o,n,s){var u;return g.version.startsWith("0")?u=g.multiPolyline(o,{color:this.options.color,weight:2,opacity:1,dashArray:n}):u=g.polyline(o,{color:this.options.color,weight:2,opacity:1,dashArray:n}),u.addTo(s),u},formatDistance:function(o,n){var s=g.Util.formatNum(o<1?o*parseFloat(this.SUB_UNIT_CONV):o,n),u=o<1?this.SUB_UNIT:this.UNIT;return{scalar:s,unit:u}},hasClass:function(o,n){var s=g.DomUtil.hasClass;for(var u in n)if(s(o,n[u]))return!0;return!1},preClick:function(o){var n=this,s=o.originalEvent.target;this.hasClass(s,["leaflet-popup","total-popup-content"])||(n.layer||n.initLayer(),n.cleanUpMarkers(!0),n.fixedLast=n.last,n.prevLatlng=o.latlng,n.sum=0)},getMouseClickHandler:function(o){var n=this;n.fixedLast=n.last,n.sum=0,n.poly&&(n.latlngsList.push(n.latlngs),n.multi?n.multi.setLatLngs(n.latlngsList):n.multi=n.renderMultiPolyline(n.latlngsList,"5 5",n.layer,"dot"));var s,u;for(var d in n.latlngsList)s=n.latlngsList[d],n.sum+=s[0].distanceTo(s[1])/n.UNIT_CONV;n.measure.unit===this.SUB_UNIT?u=n.sum*n.SUB_UNIT_CONV:u=n.sum;var t=u.toFixed(2);n.renderCircle(o.latlng,0,n.layer,"dot",parseInt(t)?t+" "+n.measure.unit:""),n.prevLatlng=o.latlng},getMouseMoveHandler:function(o){var n="";if(this.prevLatlng){var s=o.latlng;this.latlngs=[this.prevLatlng,o.latlng],this.poly?this.poly.setLatLngs(this.latlngs):this.poly=this.renderPolyline(this.latlngs,"5 5",this.layer),this.distance=parseFloat(this.prevLatlng.distanceTo(o.latlng))/this.UNIT_CONV,this.measure=this.formatDistance(this.distance+this.sum,2);var u=this.prevLatlng?this._map.latLngToContainerPoint(this.prevLatlng):null,d=this._map.latLngToContainerPoint(s);if(u&&this.options.show_azimut){var t="color: "+this.options.contrastingColor+";";n=' <span class="azimut azimut-final" style="'+t+'"> &nbsp; '+this.getAzimut(u,d)+"&deg;</span>"}var e=this.measure.scalar+" "+this.measure.unit,i='<span class="total-popup-content" style="background-color:'+this.options.color+"; color: "+this.options.contrastingColor+'">'+e+n+"</span>";this.total?(this.totalIcon=g.divIcon({className:"total-popup",html:i}),this.total.setLatLng(o.latlng),this.total.setIcon(this.totalIcon)):(this.totalIcon=g.divIcon({className:"total-popup",html:i}),this.total=g.marker(o.latlng,{icon:this.totalIcon,clickable:!0}).addTo(this.layer));var r=this.measure.scalar,a=this.separation,h=parseInt(r).toString().length,l=Math.pow(10,h),f=r>l/2?l/10:l/20,c=0;if(this.separation=f,a!==this.separation&&this.fixedLast){this.cleanUpMarkers(),this.cleanUpFixed();var _=this.multi.getLatLngs();for(var p in _)c+=this.displayMarkers.apply(this,[_[p],!0,c]);this.displayMarkers.apply(this,[this.poly.getLatLngs(),!1,this.sum]),this.convertDots()}else this.cleanUpMarkers(),this.displayMarkers.apply(this,[this.poly.getLatLngs(),!1,this.sum])}},getDblClickHandler:function(o){var n="",s=this;if(this.total){if(this.layer.off("click"),g.DomEvent.stop(o),this.options.show_azimut){var u="color: "+this.options.contrastingColor+";";n=' <span class="azimut azimut-final" style="'+u+'"> &nbsp; '+this.lastAzimut+"&deg;</span>"}var d=this.layer,t=this.measure.scalar+" "+this.measure.unit+" ";this.measure.unit===this.SUB_UNIT?this.measure.scalar/this.UNIT_CONV:this.measure.scalar,this.total.getLatLng();var e=this.total,i=['<div class="total-popup-content" style="background-color:'+this.options.color+"; color: "+this.options.contrastingColor+'">'+t+n,'  <svg class="close" viewbox="0 0 45 35">','   <path style="stroke: '+this.options.contrastingColor+'" class="close" d="M 10,10 L 30,30 M 30,10 L 10,30" />',"  </svg>","</div>"].join("");this.totalIcon=g.divIcon({className:"total-popup",html:i}),this.total.setIcon(this.totalIcon);var r={total:this.measure,total_label:e,unit:this.UNIT_CONV,sub_unit:this.SUB_UNIT_CONV},a=function(h){g.DomUtil.hasClass(h.originalEvent.target,"close")?s.mainLayer.removeLayer(d):d.fireEvent("selected",r)};d.on("click",a),d.fireEvent("selected",r),this.resetRuler(!1)}},purgeLayers:function(o){for(var n in o)o[n]&&this.layer.removeLayer(o[n])},layerSelected:function(o){}}),Dt=()=>{const o=E();v.useEffect(()=>{const n=new Pt({unitSystem:"imperial",position:"topleft",color:"#FF0080",type:"line"});return n.addTo(o),()=>{n.remove()}})},jt=()=>{const o=E(),n=[52.56555275762325,-1.4667093894864072],s=6;v.useEffect(()=>{const u=new g.Control({position:"topleft"}),d=new g.control.scale({imperial:!1});return u.onAdd=function(){const t=g.DomUtil.create("div","leaflet-control leaflet-bar");return t.onclick=()=>{o.setView(n,s)},t.insertAdjacentHTML("afterbegin",`
        <a title="Reset view">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">
            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
            </svg>
        </a>
        `),t},u.addTo(o),d.addTo(o),()=>{u.remove(),d.remove()}},[])},Ft="data:image/svg+xml,%3csvg%20width='103'%20height='126'%20viewBox='0%200%20103%20126'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='52'%20cy='63'%20r='38.5'%20fill='%2300A33B'%20stroke='%2300A33B'/%3e%3cpath%20d='M44.1222%2075V71.0114L53.4418%2062.3821C54.2344%2061.6151%2054.8991%2060.9247%2055.4361%2060.3111C55.9815%2059.6974%2056.3949%2059.0966%2056.6761%2058.5085C56.9574%2057.9119%2057.098%2057.2685%2057.098%2056.5781C57.098%2055.8111%2056.9233%2055.1506%2056.5739%2054.5966C56.2244%2054.0341%2055.7472%2053.6037%2055.142%2053.3054C54.5369%2052.9986%2053.8509%2052.8452%2053.0838%2052.8452C52.2827%2052.8452%2051.5838%2053.0071%2050.9872%2053.331C50.3906%2053.6548%2049.9304%2054.1193%2049.6065%2054.7244C49.2827%2055.3295%2049.1207%2056.0497%2049.1207%2056.8849H43.8665C43.8665%2055.1719%2044.2543%2053.6847%2045.0298%2052.4233C45.8054%2051.1619%2046.892%2050.1861%2048.2898%2049.4957C49.6875%2048.8054%2051.2983%2048.4602%2053.1222%2048.4602C54.9972%2048.4602%2056.6293%2048.7926%2058.0185%2049.4574C59.4162%2050.1136%2060.5028%2051.0256%2061.2784%2052.1932C62.054%2053.3608%2062.4418%2054.6989%2062.4418%2056.2074C62.4418%2057.196%2062.2457%2058.1719%2061.8537%2059.1349C61.4702%2060.098%2060.7841%2061.1676%2059.7955%2062.3438C58.8068%2063.5114%2057.4134%2064.9134%2055.6151%2066.5497L51.7926%2070.2955V70.4744H62.7869V75H44.1222Z'%20fill='white'/%3e%3c/svg%3e",Vt=()=>{const o=E(),n=g.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),s=g.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}),u=g.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),d={"Open Street Map":n,"Esri Grey Canvas":s,"Esri World Imagery":u};v.useEffect(()=>{const t=new g.control.layers(d,null,{collapsed:!0});t.addTo(o);const e=t.getContainer();return e.querySelectorAll("div")[0].insertAdjacentHTML("beforebegin","<strong style='font-size: 15px; margin-bottom: 15px;'>Basemaps</strong>"),e.querySelectorAll("input")[0].setAttribute("checked","true"),n.addTo(o),()=>{t.remove()}},[])};export{Vt as B,Zt as H,zt as M,jt as R,Gt as T,Rt as _,Dt as a,Ht as b,Ft as m};
