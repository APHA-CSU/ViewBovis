import{c as tt,b as ot,d as it,e as rt,f as at,R as lt,r as M,u as Y,j as p}from"./index-C6kbHUdR.js";import{l as j,u as $,L as z}from"./hooks-DtVbxYJd.js";import{M as ct,T as ut,B as dt,R as ht,H as pt,a as gt,_ as K,b as Z,m as ft}from"./Basemaps-BIcqXztE.js";const q="data:image/svg+xml,%3csvg%20width='103'%20height='126'%20viewBox='0%200%20103%20126'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M83.6875%2063C83.6875%2091.556%2056.013%20110.037%2051.9863%20112.575C51.6771%20112.77%2051.3229%20112.77%2051.0137%20112.575C46.987%20110.037%2019.3125%2091.556%2019.3125%2063C19.3125%2039.375%2034.9084%2023.625%2051.5%2023.625C68.6667%2023.625%2083.6875%2039.375%2083.6875%2063Z'%20fill='%23222222'%20stroke='%23222222'/%3e%3cpath%20d='M68.1667%2063C68.1667%2074.4208%2060.6152%2083.5%2051.5%2083.5C42.3847%2083.5%2034.8333%2074.4208%2034.8333%2063C34.8333%2051.5792%2042.3847%2042.5%2051.5%2042.5C60.6152%2042.5%2068.1667%2051.5792%2068.1667%2063Z'%20fill='white'%20stroke='white'/%3e%3c/svg%3e",Q="/assets/showground-Ykyjdfcl.svg",J="data:image/svg+xml,%3csvg%20width='103'%20height='126'%20viewBox='0%200%20103%20126'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M52.013%20112.617C54.0284%20111.347%2061.9582%20106.089%2069.3846%2097.5771C76.8108%2089.0652%2083.7375%2077.2947%2083.7375%2063C83.7375%2039.3549%2068.7013%2023.575%2051.5%2023.575C34.8744%2023.575%2019.2625%2039.3543%2019.2625%2063C19.2625%2077.2947%2026.1892%2089.0652%2033.6154%2097.5771C41.0418%20106.089%2048.9716%20111.347%2050.987%20112.617C51.3125%20112.822%2051.6875%20112.822%2052.013%20112.617Z'%20fill='%23222222'%20stroke='%23222222'%20stroke-width='0.1'/%3e%3cpath%20d='M68.1667%2063C68.1667%2074.4208%2060.6153%2083.5%2051.5%2083.5C42.3848%2083.5%2034.8333%2074.4208%2034.8333%2063C34.8333%2051.5792%2042.3848%2042.5%2051.5%2042.5C60.6153%2042.5%2068.1667%2051.5792%2068.1667%2063Z'%20fill='white'%20stroke='white'/%3e%3cellipse%20cx='51.5'%20cy='62.5'%20rx='24.5'%20ry='29.5'%20fill='white'/%3e%3cpath%20d='M49.5847%2057.4726H56.9068V62.8483H50.433C50.3496%2064.1127%2050.1026%2065.2526%2049.6829%2066.2707C49.3466%2067.0426%2048.784%2067.8477%2047.9952%2068.6833C48.8941%2068.5007%2049.668%2068.4066%2050.3109%2068.4066C51.1354%2068.4066%2052.204%2068.5533%2053.5226%2068.8438C55.3263%2069.2256%2056.7669%2069.4192%2057.8474%2069.4192C58.7284%2069.4192%2059.4964%2069.3501%2060.1453%2069.2117C60.8031%2069.0734%2061.6603%2068.7829%2062.714%2068.3402L66%2075.0467C64.4106%2075.7826%2063.0086%2076.2945%2061.7972%2076.5795C60.5947%2076.8617%2059.3029%2077%2057.9159%2077C56.4008%2077%2054.6774%2076.7538%2052.7249%2076.2641C50.171%2075.6139%2048.5905%2075.2376%2047.9714%2075.1297C47.3612%2075.0301%2046.7034%2074.9775%2045.995%2074.9775C43.9204%2074.9775%2041.6285%2075.6498%2039.1253%2077L36%2070.6117C39.3932%2068.3596%2041.0898%2066.1103%2041.0898%2063.8582C41.0898%2063.7364%2041.0719%2063.3989%2041.0392%2062.8483H36V57.4726H39.6075C38.9973%2055.5055%2038.6431%2054.3573%2038.5687%2054.0419C38.4705%2053.566%2038.4199%2052.9767%2038.4199%2052.274C38.4199%2050.4065%2038.9557%2048.7298%2040.0272%2047.2441C41.0898%2045.7584%2042.4977%2044.6794%2044.2449%2044.0126C45.9921%2043.3375%2048.3405%2043%2051.2962%2043C54.0643%2043%2056.255%2043.2905%2057.8682%2043.866C59.4845%2044.4387%2060.8537%2045.396%2061.9639%2046.7295C63.083%2048.0686%2063.851%2049.6844%2064.2707%2051.5851L55.0287%2052.9242C54.5673%2051.3305%2054.0316%2050.2737%2053.4303%2049.7535C52.8291%2049.2334%2052.1445%2048.9733%2051.3795%2048.9733C50.4479%2048.9733%2049.6978%2049.2555%2049.1233%2049.8227C48.5459%2050.3899%2048.2572%2051.1922%2048.2572%2052.2353C48.2572%2052.7941%2048.3137%2053.3226%2048.4298%2053.8344C48.537%2054.3545%2048.9239%2055.5664%2049.5847%2057.4726Z'%20fill='%23222222'/%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20width='103'%20height='126'%20viewBox='0%200%20103%20126'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M52.013%20112.617C54.0284%20111.347%2061.9582%20106.089%2069.3846%2097.5771C76.8108%2089.0652%2083.7375%2077.2947%2083.7375%2063C83.7375%2039.3549%2068.7013%2023.575%2051.5%2023.575C34.8744%2023.575%2019.2625%2039.3543%2019.2625%2063C19.2625%2077.2947%2026.1892%2089.0652%2033.6154%2097.5771C41.0418%20106.089%2048.9716%20111.347%2050.987%20112.617C51.3125%20112.822%2051.6875%20112.822%2052.013%20112.617Z'%20fill='%23222222'%20stroke='%23222222'%20stroke-width='0.1'/%3e%3cpath%20d='M68.1667%2063C68.1667%2074.4208%2060.6152%2083.5%2051.5%2083.5C42.3847%2083.5%2034.8333%2074.4208%2034.8333%2063C34.8333%2051.5792%2042.3847%2042.5%2051.5%2042.5C60.6152%2042.5%2068.1667%2051.5792%2068.1667%2063Z'%20fill='white'%20stroke='white'/%3e%3cellipse%20cx='51.5'%20cy='62.5'%20rx='24.5'%20ry='29.5'%20fill='white'/%3e%3cpath%20d='M51.0318%2040.9482C50.9219%2040.9704%2050.8156%2041.0144%2050.7224%2041.0809C50.5358%2041.2131%2050.4139%2041.4192%2050.3875%2041.6467C50.3786%2041.7262%2049.4026%2049.7731%2044.8221%2062.1051C44.7639%2062.2618%2044.6949%2062.4383%2044.6179%2062.6284L49.9036%2065.7483C50.6604%2064.9214%2051.0159%2065.0435%2051.0215%2065.0449C55.1367%2066.8036%2055.968%2067.1868%2055.976%2067.1899C56.1695%2067.2798%2056.3924%2067.2896%2056.5936%2067.2163L56.5966%2067.2152C56.799%2067.1407%2058.9104%2067.4119%2059%2067.2163C64.2026%2055.9297%2064.5847%2044.8136%2064.6087%2044.707C64.6328%2044.6005%2064.4271%2043.8478%2063.9939%2043.7515L51.3653%2040.9507C51.2544%2040.9259%2051.1418%2040.9259%2051.0318%2040.9482ZM53.3276%2045.2484C53.9563%2045.0196%2054.6519%2045.3428%2054.8801%2045.9698C55.1083%2046.5969%2054.7833%2047.2916%2054.1545%2047.5204C53.5258%2047.7492%2052.8303%2047.426%2052.6021%2046.799C52.3738%2046.1719%2052.6989%2045.4773%2053.3276%2045.2484ZM43.9773%2064.1263C42.6045%2067.2229%2040.2438%2072.0423%2038.8382%2074.9116C38.2666%2076.0794%2037.8307%2076.9675%2037.644%2077.3665C37.3112%2078.0777%2037.4434%2078.8152%2038.02%2079.4424C39.2995%2080.8361%2042.9664%2081.6104%2043.6794%2081.3509C44.6263%2081.0062%2044.6642%2080.0319%2044.7081%2078.9027C44.7638%2077.4965%2044.8479%2075.3706%2046.2108%2072.4594L46.4246%2071.9946C46.7403%2071.3051%2047.3024%2070.0823%2047.6514%2069.3755C48.136%2068.3938%2048.5611%2067.642%2048.936%2067.0536L43.9773%2064.1263Z'%20fill='%23222222'/%3e%3c/svg%3e";(function(C,x){(function(o,m){m(j)})(tt,function(o){o=o&&o.hasOwnProperty("default")?o.default:o;function m(n,t){var s=t.x-n.x,i=t.y-n.y;return Math.sqrt(s*s+i*i)}var w=function(t,s){return(Math.atan2(s.y-t.y,s.x-t.x)*180/Math.PI+90+360)%360},A=function(t,s){var i=t.value,l=t.isInPixels;return l?i/s:i};function O(n){if(typeof n=="string"&&n.indexOf("%")!==-1)return{value:parseFloat(n)/100,isInPixels:!1};var t=n?parseFloat(n):0;return{value:t,isInPixels:t>0}}var F=function(t,s){return t.x===s.x&&t.y===s.y};function y(n){return n.reduce(function(t,s,i,l){if(i>0&&!F(s,l[i-1])){var d=l[i-1],h=t.length>0?t[t.length-1].distB:0,b=m(d,s);t.push({a:d,b:s,distA:h,distB:h+b,heading:w(d,s)})}return t},[])}function P(n,t){var s=y(n),i=s.length;if(i===0)return[];var l=s[i-1].distB,d=A(t.offset,l),h=A(t.endOffset,l),b=A(t.repeat,l),v=l*b,_=d>0?l*d:0,E=h>0?l*h:0,r=[],a=_;do r.push(a),a+=v;while(v>0&&a<l-E);var c=0,f=s[0];return r.map(function(S){for(;S>f.distB&&c<i-1;)c++,f=s[c];var N=(S-f.distA)/(f.distB-f.distA);return{pt:I(f.a,f.b,N),heading:f.heading}})}function I(n,t,s){return t.x!==n.x?{x:n.x+s*(t.x-n.x),y:n.y+s*(t.y-n.y)}:{x:n.x,y:n.y+(t.y-n.y)*s}}(function(){var n=L.Marker.prototype._initIcon,t=L.Marker.prototype._setPos,s=L.DomUtil.TRANSFORM==="msTransform";L.Marker.addInitHook(function(){var i=this.options.icon&&this.options.icon.options,l=i&&this.options.icon.options.iconAnchor;l&&(l=l[0]+"px "+l[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||l||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(d){d.target._applyRotation()})}),L.Marker.include({_initIcon:function(){n.call(this)},_setPos:function(i){t.call(this,i),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,s?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(i){return this.options.rotationAngle=i,this.update(),this},setRotationOrigin:function(i){return this.options.rotationOrigin=i,this.update(),this}})})(),o.Symbol=o.Symbol||{},o.Symbol.Dash=o.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(t){o.Util.setOptions(this,t),this.options.pathOptions.clickable=!1},buildSymbol:function(t,s,i,l,d){var h=this.options,b=Math.PI/180;if(h.pixelSize<=1)return o.polyline([t.latLng,t.latLng],h.pathOptions);var v=i.project(t.latLng),_=-(t.heading-90)*b,E=o.point(v.x+h.pixelSize*Math.cos(_+Math.PI)/2,v.y+h.pixelSize*Math.sin(_)/2),r=v.add(v.subtract(E));return o.polyline([i.unproject(E),i.unproject(r)],h.pathOptions)}}),o.Symbol.dash=function(n){return new o.Symbol.Dash(n)},o.Symbol.ArrowHead=o.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(t){o.Util.setOptions(this,t),this.options.pathOptions.clickable=!1},buildSymbol:function(t,s,i,l,d){return this.options.polygon?o.polygon(this._buildArrowPath(t,i),this.options.pathOptions):o.polyline(this._buildArrowPath(t,i),this.options.pathOptions)},_buildArrowPath:function(t,s){var i=Math.PI/180,l=s.project(t.latLng),d=-(t.heading-90)*i,h=this.options.headAngle/2*i,b=d+h,v=d-h,_=o.point(l.x-this.options.pixelSize*Math.cos(b),l.y+this.options.pixelSize*Math.sin(b)),E=o.point(l.x-this.options.pixelSize*Math.cos(v),l.y+this.options.pixelSize*Math.sin(v));return[s.unproject(_),t.latLng,s.unproject(E)]}}),o.Symbol.arrowHead=function(n){return new o.Symbol.ArrowHead(n)},o.Symbol.Marker=o.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(t){o.Util.setOptions(this,t),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(t,s,i,l,d){return this.options.rotate&&(this.options.markerOptions.rotationAngle=t.heading+(this.options.angleCorrection||0)),o.marker(t.latLng,this.options.markerOptions)}}),o.Symbol.marker=function(n){return new o.Symbol.Marker(n)};var R=function(t){return t instanceof o.LatLng||Array.isArray(t)&&t.length===2&&typeof t[0]=="number"},T=function(t){return Array.isArray(t)&&R(t[0])};o.PolylineDecorator=o.FeatureGroup.extend({options:{patterns:[]},initialize:function(t,s){o.FeatureGroup.prototype.initialize.call(this),o.Util.setOptions(this,s),this._map=null,this._paths=this._initPaths(t),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(t,s){var i=this;if(T(t)){var l=s?t.concat([t[0]]):t;return[l]}return t instanceof o.Polyline?this._initPaths(t.getLatLngs(),t instanceof o.Polygon):Array.isArray(t)?t.reduce(function(d,h){return d.concat(i._initPaths(h,s))},[]):[]},_initPatterns:function(t){return t.map(this._parsePatternDef)},setPatterns:function(t){this.options.patterns=t,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(t){this._paths=this._initPaths(t),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(t,s){return{symbolFactory:t.symbol,offset:O(t.offset),endOffset:O(t.endOffset),repeat:O(t.repeat)}},onAdd:function(t){this._map=t,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(t){this._map.off("moveend",this.redraw,this),this._map=null,o.FeatureGroup.prototype.onRemove.call(this,t)},_initBounds:function(){var t=this._paths.reduce(function(s,i){return s.concat(i)},[]);return o.latLngBounds(t)},getBounds:function(){return this._bounds},_buildSymbols:function(t,s,i){var l=this;return i.map(function(d,h){return s.buildSymbol(d,t,l._map,h,i.length)})},_getDirectionPoints:function(t,s){var i=this;if(t.length<2)return[];var l=t.map(function(d){return i._map.project(d)});return P(l,s).map(function(d){return{latLng:i._map.unproject(o.point(d.pt)),heading:d.heading}})},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(t){var s=this,i=this._map.getBounds().pad(.1);return this._paths.map(function(l){var d=s._getDirectionPoints(l,t).filter(function(h){return i.contains(h.latLng)});return o.featureGroup(s._buildSymbols(l,t.symbolFactory,d))})},_draw:function(){var t=this;this._patterns.map(function(s){return t._getPatternLayers(s)}).forEach(function(s){t.addLayer(o.featureGroup(s))})}}),o.polylineDecorator=function(n,t){return new o.PolylineDecorator(n,t)}})})();var mt={exports:{}};/*!
  * Bootstrap tab.js v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(C,x){(function(o,m){C.exports=m(ot(),it(),rt(),at())})(tt,function(o,m,w,A){const O="tab",y=".bs.tab",P=`hide${y}`,I=`hidden${y}`,R=`show${y}`,T=`shown${y}`,n=`click${y}`,t=`keydown${y}`,s=`load${y}`,i="ArrowLeft",l="ArrowRight",d="ArrowUp",h="ArrowDown",b="Home",v="End",_="active",E="fade",r="show",a="dropdown",c=".dropdown-toggle",f=".dropdown-menu",S=`:not(${c})`,N='.list-group, .nav, [role="tablist"]',B=".nav-item, .list-group-item",H=`.nav-link${S}, .list-group-item${S}, [role="tab"]${S}`,W='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',U=`${H}, ${W}`,et=`.${_}[data-bs-toggle="tab"], .${_}[data-bs-toggle="pill"], .${_}[data-bs-toggle="list"]`;class k extends o{constructor(e){super(e),this._parent=this._element.closest(N),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),m.on(this._element,t,u=>this._keydown(u)))}static get NAME(){return O}show(){const e=this._element;if(this._elemIsActive(e))return;const u=this._getActiveElem(),g=u?m.trigger(u,P,{relatedTarget:e}):null;m.trigger(e,R,{relatedTarget:u}).defaultPrevented||g&&g.defaultPrevented||(this._deactivate(u,e),this._activate(e,u))}_activate(e,u){if(!e)return;e.classList.add(_),this._activate(w.getElementFromSelector(e));const g=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(r);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),m.trigger(e,T,{relatedTarget:u})};this._queueCallback(g,e,e.classList.contains(E))}_deactivate(e,u){if(!e)return;e.classList.remove(_),e.blur(),this._deactivate(w.getElementFromSelector(e));const g=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(r);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),m.trigger(e,I,{relatedTarget:u})};this._queueCallback(g,e,e.classList.contains(E))}_keydown(e){if(![i,l,d,h,b,v].includes(e.key))return;e.stopPropagation(),e.preventDefault();const u=this._getChildren().filter(D=>!A.isDisabled(D));let g;if([b,v].includes(e.key))g=u[e.key===b?0:u.length-1];else{const D=[l,h].includes(e.key);g=A.getNextActiveElement(u,e.target,D,!0)}g&&(g.focus({preventScroll:!0}),k.getOrCreateInstance(g).show())}_getChildren(){return w.find(U,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,u){this._setAttributeIfNotExists(e,"role","tablist");for(const g of u)this._setInitialAttributesOnChild(g)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const u=this._elemIsActive(e),g=this._getOuterElement(e);e.setAttribute("aria-selected",u),g!==e&&this._setAttributeIfNotExists(g,"role","presentation"),u||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const u=w.getElementFromSelector(e);u&&(this._setAttributeIfNotExists(u,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(u,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,u){const g=this._getOuterElement(e);if(!g.classList.contains(a))return;const D=(nt,st)=>{const G=w.findOne(nt,g);G&&G.classList.toggle(st,u)};D(c,_),D(f,r),g.setAttribute("aria-expanded",u)}_setAttributeIfNotExists(e,u,g){e.hasAttribute(u)||e.setAttribute(u,g)}_elemIsActive(e){return e.classList.contains(_)}_getInnerElement(e){return e.matches(U)?e:w.findOne(U,e)}_getOuterElement(e){return e.closest(B)||e}static jQueryInterface(e){return this.each(function(){const u=k.getOrCreateInstance(this);if(typeof e=="string"){if(u[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);u[e]()}})}}return m.on(document,n,W,function(V){["A","AREA"].includes(this.tagName)&&V.preventDefault(),!A.isDisabled(this)&&k.getOrCreateInstance(this).show()}),m.on(window,s,()=>{for(const V of w.find(et))k.getOrCreateInstance(V)}),A.defineJQueryPlugin(k),k})})(mt);const wt=lt.memo(({checkedLayers:C,useCountyandHotspotLayers:x,setOpenSideBar:o,openSideBar:m,RiskLayers:w,CountyLayers:A,HotspotLayers:O})=>{const F=M.useRef(),y=Y(r=>r.movement.cattleMovementDataset),P=Y(r=>r.movement.secondMovementDataset),I=y.move?Object.values(y.move):[],R=I.map(r=>[r.lat,r.lon]),T=P.move?Object.values(P.move):[],n=T.map(r=>[r.lat,r.lon]),t={holding:new j.Icon({iconUrl:q,iconSize:[40,40],iconAnchor:[20,35]}),showground:new j.Icon({iconUrl:Q,iconSize:[40,40],iconAnchor:[20,35]}),market:new j.Icon({iconUrl:J,iconSize:[40,40],iconAnchor:[20,35]}),slaughterhouse:new j.Icon({iconUrl:X,iconSize:[40,40],iconAnchor:[20,35]})},s=r=>{let a=r.type;return a==="Agricultural Holding"?t.holding:a==="Market"?t.market:a==="Slaughterhouse (Red Meat)"?t.slaughterhouse:a==="Showground"?t.showground:t.holding},i=r=>new j.divIcon({html:`<span class="cluster-icon">${r.getChildCount()}</span>`,className:"cluster-icon",iconSize:[30,30]}),l=function(r,a,c,f){return`
    <div class="fs-5 fw-bold">${r.identifier}</div><br>
    <div>
      <nav>
        <div class="nav nav-tabs" id="popupNav" role="tablist">
          <button class="nav-link active" id="navSummary" data-bs-toggle="tab" data-bs-target="#navSummaryContent${c}${f}" type="button" role="tab" aria-controls="navSummaryContent" aria-selected="true">Summary</button>
          <button class="nav-link" id="navInfo" data-bs-toggle="tab" data-bs-target="#navInfoContent${c}${f}" type="button" role="tab" aria-controls="navInfoContent" aria-selected="false">Animal</button>
        </div>
      </nav>
      <div class="tab-content" id="popTabContent">     
        <div class="tab-pane fade show active" id="navSummaryContent${c}${f}" role="tabpanel" aria-labelledby="navSummary" tabindex="0">
          <table class="table table-striped">
            <tbody>
              <tr>
                <td><strong>Movement:</strong></td>
                <td>${`${c+1} of ${a.length}`}</td>
              </tr>
              <tr>
                <td><strong>Duration of Stay:</strong></td>
                <td>${a[c].stay_length<=30?`${a[c].stay_length} days`:a[c].stay_length>30&&a[c].stay_length<=365?`${(a[c].stay_length/7).toFixed(0)} weeks`:`${(a[c].stay_length/365).toFixed(1)} years`}
                </td> 
              </tr>
              <tr>
                <td><strong>Date of Arrival:</strong></td>
                <td>${a[c].on_date}</td> 
              </tr>
              <tr>
                <td><strong>Date of Departure:</strong></td>
                <td>${a[c].off_date}</td> 
              </tr>
              <tr>
                <td><strong>Species:</strong></td>
                <td>${r.species==="COW"?"Bovine":r.species}</td>
              </tr>
              <tr>
                <td><strong>Precise Location:</strong></td>
                <td>${a[c].cph}</td>
              </tr>
              <tr>
                <td><strong>Precise Location Type:</strong></td>
                <td>${a[c].type}</td>
              </tr>
              <tr>
                <td><strong>OS Map Reference:</strong></td>
                <td>${a[c].os_map_ref}</td>
              </tr>
              <tr>
                <td><strong>Submission:</strong></td>
                <td>${r.submission}</td> 
              </tr>
              <tr>
                <td><strong>County:</strong></td>
                <td>${a[c].county}</td>
              </tr>
              <tr>
                <td><strong>Clade:</strong></td>
                <td>${r.clade}</td>
              </tr>
              <tr>
                <td><strong>Out of Home Range:</strong></td>
                <td>${r.out_of_homerange==="N"?"No":"Yes"}</td>
              </tr>
              <tr>
                <td><strong>Risk Area:</strong></td>
                <td>${a[c].risk_area_current}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="tab-pane fade show" id="navInfoContent${c}${f}" role="tabpanel" aria-labelledby="navInfo" tabindex="0">
          <table class="table table-striped">
            <tbody>
              <tr>
                <td><strong>Birth Location:</strong></td>
                <td>${a[0].cph}</td>
              </tr>
              <tr>
                <td><strong>Date of Birth:</strong></td>
                <td>${r.dob}</td>
              </tr>
              <tr>
                <td><strong>Slaughter Date:</strong></td>
                <td>${r.slaughter_date}</td>
              </tr>
              <tr>
                <td><strong>Sex:</strong></td>
                <td>${r.sex==="F"?"Female":r.sex==="M"?"Male":"Unknown"}</td>
              </tr> 
              <tr>
                <td><strong>Disclosing Test Type:</strong></td>
                <td>${r.disclosing_test}</td>
              </tr> 
              <tr>
                <td><strong>Import Country:</strong></td>
                <td>${r.import_country==null?"British":`${r.import_country}`}</td>
              </tr> 
            </tbody>
          </table>
        </div>
      </div>           
    `},d={maxWidth:400,className:"cattlePopup",autoClose:!1,closeOnClick:!1},h=()=>{const r=$();M.useEffect(()=>{const a=z.control({position:"topright"});return a.onAdd=()=>{const c=z.DomUtil.create("div","leaflet-control leaflet-bar");return c.insertAdjacentHTML("afterbegin",`<div class="icons-legend"> <span class="fs-6" style="padding-left:6px;"><strong>Legend</strong></span>
            <span style="display: flex; align-items: center;">
            <img src=${q} class="legend-marker-img">
            <span>Holding</span>
          </span>
          <span style="display: flex; align-items: center;">
          <img src=${J} class="legend-marker-img">
          <span>Market</span>
        </span>
        <span style="display: flex; align-items: center;">
        <img src=${Q} class="legend-marker-img">
        <span>Showground</span>
        </span>
        <span style="display: flex; align-items: center;">
      <img src=${X} class="legend-marker-img">
      <span>Slaughterhouse</span>
      </span>
      <span style="display: flex; align-items: center;">
      <img src=${ft} class="legend-marker-img">
      <span>Movement cluster</span>
      </span>
      <span style="display: flex; align-items: center;">
      <svg style="margin-left: 5px;" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#0096FF" class="bi bi-caret-right-fill" viewBox="0 0 16 16">
        <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
      </svg>
      <span  style="padding-left:10px;">Cattle movement lines</span>
    </span>
          </div>`),c},a.addTo(r),()=>{r.removeControl(a)}})},b=r=>[{repeat:100,symbol:z.Symbol.arrowHead({pixelSize:15,polygon:!0,pathOptions:{stroke:!0,color:r}})}],v=b("#0096FF"),_=b("#cb181d"),E=({patterns:r,color:a,position:c})=>{const f=$(),S=M.useRef(null),N=M.useRef([]);M.useEffect(()=>{if(!f)return;const B=z.polyline(c,{color:a}).addTo(f),H=z.polylineDecorator(B,{patterns:r}).addTo(f);return S.current=B,N.current=H,()=>{S.current&&(f.removeLayer(S.current),f.removeLayer(N.current))}})};return p.jsx("div",{ref:F,children:p.jsxs(ct,{center:[53.3781,-1],zoom:6,children:[p.jsx(ut,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),p.jsx(bt,{mapRef:F}),p.jsxs(M.Suspense,{fallback:p.jsx(p.Fragment,{}),children:[p.jsx(O,{isChecked:x.hotspotLayers}),p.jsx(A,{isChecked:x.countyLayers}),Object.keys(C).length>0&&p.jsx(w,{checkedLayers:C})]}),p.jsx(dt,{}),p.jsx(_t,{jsonData:y,secondJsonData:P}),p.jsx(ht,{}),p.jsx(pt,{setOpenSideBar:o,openSideBar:m,type:"movement"}),p.jsx(gt,{}),R.concat(n).length>0&&p.jsx(h,{}),p.jsx(K,{chunkedLoading:!0,iconCreateFunction:i,maxClusterRadius:0,children:R.map((r,a)=>p.jsx(Z,{ref:c=>c==null?void 0:c.bindPopup(l(y,I,a,`firstMov-${a}`),d),position:r,icon:s(I[a]),children:p.jsx(E,{patterns:v,color:"#0096FF",position:R},`decorator-${a}`)},`firstMov-${a}`))}),p.jsx(K,{chunkedLoading:!0,iconCreateFunction:i,maxClusterRadius:0,children:n.map((r,a)=>p.jsx(Z,{ref:c=>c==null?void 0:c.bindPopup(l(P,T,a,`secondMov-${a}`),d),position:r,icon:s(T[a]),children:p.jsx(E,{patterns:_,color:"#cb181d",position:n},`second-decorator-${a}`)},`secondMov-${a}`))})]})})}),_t=({jsonData:C,secondJsonData:x})=>{const o=$(),m=C.move?Object.values(C.move).map(O=>[O.lat,O.lon]):[],w=x.move?Object.values(x.move).map(O=>[O.lat,O.lon]):[],A=[...m,...w];return M.useEffect(()=>{A.length>0&&o.fitBounds(z.latLngBounds(A).pad(.1))},[C,x]),p.jsx(p.Fragment,{})},bt=({mapRef:C})=>{const x=$(),o=new ResizeObserver(()=>{x&&C.current&&x.invalidateSize()});M.useEffect(()=>(C.current&&o.observe(C.current),()=>{o.disconnect()}),[])};export{wt as default};
