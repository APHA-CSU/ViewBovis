"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[851],{8495:(t,e,n)=>{n.d(e,{A:()=>s});n(5043);const s=n.p+"static/media/movementCluster.a3550c9f2beb7fe7086c099ed4535084.svg"},4851:(t,e,n)=>{n.r(e),n.d(e,{default:()=>w});var s=n(9896),a=n(9419),o=n(9349),i=n(6036),r=n(228),l=n.n(r),c=n(5936),d=n.n(c),p=n(5043);const h=n.p+"static/media/holding.a9f895f6127d2d8f703a7a91b464f56c.svg";const u=n.p+"static/media/showground.8d58ce9f7f17a7f61aad975c0747eb64.svg";const m=n.p+"static/media/market.cd9cb3f068fd2d9aab513c4b36ad916d.svg";const g=n.p+"static/media/slaughterhouse.5eda9a7d69fbd0ab1e007c1a7460e90b.svg";var v=n(8495),f=(n(8856),n(3378),n(8814)),y=n(9837),b=n(900),L=n(2242),k=(n(6433),n(4556)),C=n(579);const _=p.memo((t=>{let{checkedLayers:e,useCountyandHotspotLayers:n,setOpenSideBar:c,openSideBar:_,RiskLayers:w,CountyLayers:S,HotspotLayers:T}=t;const I=(0,p.useRef)(),A=(0,k.d4)((t=>t.movement.cattleMovementDataset)),N=(0,k.d4)((t=>t.movement.secondMovementDataset)),M=A.move?Object.values(A.move):[],$=M.map((t=>[t.lat,t.lon])),D=N.move?Object.values(N.move):[],z=D.map((t=>[t.lat,t.lon])),E={holding:new r.Icon({iconUrl:h,iconSize:[40,40],iconAnchor:[20,35]}),showground:new r.Icon({iconUrl:u,iconSize:[40,40],iconAnchor:[20,35]}),market:new r.Icon({iconUrl:m,iconSize:[40,40],iconAnchor:[20,35]}),slaughterhouse:new r.Icon({iconUrl:g,iconSize:[40,40],iconAnchor:[20,35]})},O=t=>{let e=t.type;return"Agricultural Holding"===e?E.holding:"Market"===e?E.market:"Slaughterhouse (Red Meat)"===e?E.slaughterhouse:"Showground"===e?E.showground:E.holding},j=t=>new r.divIcon({html:`<span class="cluster-icon">${t.getChildCount()}</span>`,className:"cluster-icon",iconSize:[30,30]}),B=function(t,e,n,s){return`\n    <div class="fs-5 fw-bold">${t.identifier}</div><br>\n    <div>\n      <nav>\n        <div class="nav nav-tabs" id="popupNav" role="tablist">\n          <button class="nav-link active" id="navSummary" data-bs-toggle="tab" data-bs-target="#navSummaryContent${n}${s}" type="button" role="tab" aria-controls="navSummaryContent" aria-selected="true">Summary</button>\n          <button class="nav-link" id="navInfo" data-bs-toggle="tab" data-bs-target="#navInfoContent${n}${s}" type="button" role="tab" aria-controls="navInfoContent" aria-selected="false">Animal</button>\n        </div>\n      </nav>\n      <div class="tab-content" id="popTabContent">     \n        <div class="tab-pane fade show active" id="navSummaryContent${n}${s}" role="tabpanel" aria-labelledby="navSummary" tabindex="0">\n          <table class="table table-striped">\n            <tbody>\n              <tr>\n                <td><strong>Movement:</strong></td>\n                <td>${n+1} of ${e.length}</td>\n              </tr>\n              <tr>\n                <td><strong>Duration of Stay:</strong></td>\n                <td>${e[n].stay_length<=30?`${e[n].stay_length} days`:e[n].stay_length>30&&e[n].stay_length<=365?`${(e[n].stay_length/7).toFixed(0)} weeks`:`${(e[n].stay_length/365).toFixed(1)} years`}\n                </td> \n              </tr>\n              <tr>\n                <td><strong>Date of Arrival:</strong></td>\n                <td>${e[n].on_date}</td> \n              </tr>\n              <tr>\n                <td><strong>Date of Departure:</strong></td>\n                <td>${e[n].off_date}</td> \n              </tr>\n              <tr>\n                <td><strong>Species:</strong></td>\n                <td>${"COW"===t.species?"Bovine":t.species}</td>\n              </tr>\n              <tr>\n                <td><strong>Precise Location:</strong></td>\n                <td>${e[n].cph}</td>\n              </tr>\n              <tr>\n                <td><strong>Precise Location Type:</strong></td>\n                <td>${e[n].type}</td>\n              </tr>\n              <tr>\n                <td><strong>OS Map Reference:</strong></td>\n                <td>${e[n].os_map_ref}</td>\n              </tr>\n              <tr>\n                <td><strong>Submission:</strong></td>\n                <td>${t.submission}</td> \n              </tr>\n              <tr>\n                <td><strong>County:</strong></td>\n                <td>${e[n].county}</td>\n              </tr>\n              <tr>\n                <td><strong>Clade:</strong></td>\n                <td>${t.clade}</td>\n              </tr>\n              <tr>\n                <td><strong>Out of Home Range:</strong></td>\n                <td>${"N"===t.out_of_homerange?"No":"Yes"}</td>\n              </tr>\n              <tr>\n                <td><strong>Risk Area:</strong></td>\n                <td>${e[n].risk_area_current}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div class="tab-pane fade show" id="navInfoContent${n}${s}" role="tabpanel" aria-labelledby="navInfo" tabindex="0">\n          <table class="table table-striped">\n            <tbody>\n              <tr>\n                <td><strong>Birth Location:</strong></td>\n                <td>${e[0].cph}</td>\n              </tr>\n              <tr>\n                <td><strong>Date of Birth:</strong></td>\n                <td>${t.dob}</td>\n              </tr>\n              <tr>\n                <td><strong>Slaughter Date:</strong></td>\n                <td>${t.slaughter_date}</td>\n              </tr>\n              <tr>\n                <td><strong>Sex:</strong></td>\n                <td>${"F"===t.sex?"Female":"M"===t.sex?"Male":"Unknown"}</td>\n              </tr> \n              <tr>\n                <td><strong>Disclosing Test Type:</strong></td>\n                <td>${t.disclosing_test}</td>\n              </tr> \n              <tr>\n                <td><strong>Import Country:</strong></td>\n                <td>${null==t.import_country?"British":`${t.import_country}`}</td>\n              </tr> \n            </tbody>\n          </table>\n        </div>\n      </div>           \n    `},F={maxWidth:400,className:"cattlePopup",autoClose:!1,closeOnClick:!1},H=()=>{const t=(0,s.ko)();(0,p.useEffect)((()=>{const e=l().control({position:"topright"});return e.onAdd=()=>{const t=l().DomUtil.create("div","leaflet-control leaflet-bar");return t.insertAdjacentHTML("afterbegin",`<div class="icons-legend"> <span class="fs-6" style="padding-left:6px;"><strong>Legend</strong></span>\n            <span style="display: flex; align-items: center;">\n            <img src=${h} class="legend-marker-img">\n            <span>Holding</span>\n          </span>\n          <span style="display: flex; align-items: center;">\n          <img src=${m} class="legend-marker-img">\n          <span>Market</span>\n        </span>\n        <span style="display: flex; align-items: center;">\n        <img src=${u} class="legend-marker-img">\n        <span>Showground</span>\n        </span>\n        <span style="display: flex; align-items: center;">\n      <img src=${g} class="legend-marker-img">\n      <span>Slaughterhouse</span>\n      </span>\n      <span style="display: flex; align-items: center;">\n      <img src=${v.A} class="legend-marker-img">\n      <span>Movement cluster</span>\n      </span>\n      <span style="display: flex; align-items: center;">\n      <svg style="margin-left: 5px;" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#0096FF" class="bi bi-caret-right-fill" viewBox="0 0 16 16">\n        <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>\n      </svg>\n      <span  style="padding-left:10px;">Cattle movement lines</span>\n    </span>\n          </div>`),t},e.addTo(t),()=>{t.removeControl(e)}}))},R=t=>[{repeat:100,symbol:l().Symbol.arrowHead({pixelSize:15,polygon:!0,pathOptions:{stroke:!0,color:t}})}],P=R("#0096FF"),V=R("#cb181d"),G=t=>{let{patterns:e,color:n,position:a}=t;const o=(0,s.ko)(),i=(0,p.useRef)(null),r=(0,p.useRef)([]);(0,p.useEffect)((()=>{if(!o)return;const t=l().polyline(a,{color:n}).addTo(o),s=l().polylineDecorator(t,{patterns:e}).addTo(o);return i.current=t,r.current=s,()=>{i.current&&(o.removeLayer(i.current),o.removeLayer(r.current))}}))};return(0,C.jsx)("div",{ref:I,children:(0,C.jsxs)(a.W,{center:[53.3781,-1],zoom:6,children:[(0,C.jsx)(o.e,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,C.jsx)(U,{mapRef:I}),(0,C.jsxs)(p.Suspense,{fallback:(0,C.jsx)(C.Fragment,{}),children:[(0,C.jsx)(T,{isChecked:n.hotspotLayers}),(0,C.jsx)(S,{isChecked:n.countyLayers}),Object.keys(e).length>0&&(0,C.jsx)(w,{checkedLayers:e})]}),(0,C.jsx)(L.A,{}),(0,C.jsx)(x,{jsonData:A,secondJsonData:N}),(0,C.jsx)(b.A,{}),(0,C.jsx)(f.A,{setOpenSideBar:c,openSideBar:_,type:"movement"}),(0,C.jsx)(y.A,{}),$.concat(z).length>0&&(0,C.jsx)(H,{}),(0,C.jsx)(d(),{chunkedLoading:!0,iconCreateFunction:j,maxClusterRadius:0,children:$.map(((t,e)=>(0,C.jsx)(i.p,{ref:t=>null===t||void 0===t?void 0:t.bindPopup(B(A,M,e,`firstMov-${e}`),F),position:t,icon:O(M[e]),children:(0,C.jsx)(G,{patterns:P,color:"#0096FF",position:$},`decorator-${e}`)},`firstMov-${e}`)))}),(0,C.jsx)(d(),{chunkedLoading:!0,iconCreateFunction:j,maxClusterRadius:0,children:z.map(((t,e)=>(0,C.jsx)(i.p,{ref:t=>null===t||void 0===t?void 0:t.bindPopup(B(N,D,e,`secondMov-${e}`),F),position:t,icon:O(D[e]),children:(0,C.jsx)(G,{patterns:V,color:"#cb181d",position:z},`second-decorator-${e}`)},`secondMov-${e}`)))})]})})})),x=t=>{let{jsonData:e,secondJsonData:n}=t;const a=(0,s.ko)(),o=[...e.move?Object.values(e.move).map((t=>[t.lat,t.lon])):[],...n.move?Object.values(n.move).map((t=>[t.lat,t.lon])):[]];return(0,p.useEffect)((()=>{o.length>0&&a.fitBounds(l().latLngBounds(o).pad(.1))}),[e,n]),(0,C.jsx)(C.Fragment,{})},U=t=>{let{mapRef:e}=t;const n=(0,s.ko)(),a=new ResizeObserver((()=>{n&&e.current&&n.invalidateSize()}));(0,p.useEffect)((()=>(e.current&&a.observe(e.current),()=>{a.disconnect()})),[])},w=_},2242:(t,e,n)=>{n.d(e,{A:()=>r});var s=n(228),a=n.n(s),o=n(5043),i=n(9896);const r=()=>{const t=(0,i.ko)(),e=a().tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),n=a().tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ",maxZoom:16}),s=a().tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),r={"Open Street Map":e,"Esri Grey Canvas":n,"Esri World Imagery":s};(0,o.useEffect)((()=>{const n=new(a().control.layers)(r,null,{collapsed:!0});n.addTo(t);const s=n.getContainer();s.querySelectorAll("div")[0].insertAdjacentHTML("beforebegin","<strong style='font-size: 15px; margin-bottom: 15px;'>Basemaps</strong>");return s.querySelectorAll("input")[0].setAttribute("checked","true"),e.addTo(t),()=>{n.remove()}}),[])}},8814:(t,e,n)=>{n.d(e,{A:()=>r});var s=n(228),a=n.n(s),o=n(5043),i=n(9896);const r=t=>{let{setOpenSideBar:e,openSideBar:n}=t;const s=(0,i.ko)();(0,o.useEffect)((()=>{const t=new(a().Control)({position:"topleft"});return t.onAdd=function(){const t=a().DomUtil.create("div","leaflet-control leaflet-bar");return t.setAttribute("id","btn__map-fullscreen"),t.onclick=function(){e(!n),s.invalidateSize()},n?t.insertAdjacentHTML("afterbegin",'<a id="toggle-sidebar" title="Hide sidebar">\n          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">\n            <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>\n            <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"\n            />\n          </svg>\n        </a>\n              '):t.insertAdjacentHTML("afterbegin",'<a id="toggle-sidebar" title="Show sidebar">\n          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">\n          <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"></path>\n          <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"></path>\n        </svg>\n        </a>\n              '),t},t.addTo(s),()=>{t.remove()}}),[n])}},9837:(t,e,n)=>{n.d(e,{A:()=>l});var s=n(5043),a=n(9896),o=n(228),i=n.n(o);const r=i().Control.extend({options:{position:"topleft",unitSystem:"imperial",color:"#4D90FE",contrastingColor:"#fff",show_last_node:!1,show_azimut:!1},clickSpeed:200,onAdd:function(t){var e=i().DomUtil.create("div","leaflet-control leaflet-bar"),n=i().DomUtil.create("a","icon-ruler",e),s=t.getContainer(),a=this;n.href="#",n.title="Toggle measurement tool",i().DomEvent.on(n,"click",i().DomEvent.stop).on(n,"click",(function(){i().DomUtil.hasClass(n,"icon-active")?(a.resetRuler(!!a.mainLayer),i().DomUtil.removeClass(n,"icon-active"),i().DomUtil.removeClass(s,"ruler-map")):(a.initRuler(),i().DomUtil.addClass(n,"icon-active"),i().DomUtil.addClass(s,"ruler-map"))})),this.options.color&&-1===this.options.color.indexOf("#")?this.options.color="#"+this.options.color:this.options.color||(this.options.color="#4D90FE");var o=this.options.color.replace("#","");return this.options.contrastingColor="#"+(function(t){var e="string"===typeof t?function(t){if(3===t.length)t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2);else if(6!==t.length)throw new Error("Invalid hex color: "+t);for(var e=[],n=0;n<=2;n++)e[n]=parseInt(t.substr(2*n,2),16);return e}(t):t;return.2126*e[0]+.7152*e[1]+.0722*e[2]}(o)>=165?"000":"fff"),e},onRemove:function(t){this.resetRuler(!!this.mainLayer)},initRuler:function(){var t=this,e=this._map;this.mainLayer=i().featureGroup(),this.mainLayer.addTo(this._map),e.touchZoom.disable(),e.doubleClickZoom.disable(),e.boxZoom.disable(),e.keyboard.disable(),e.tap&&e.tap.disable(),this.dblClickEventFn=function(t){i().DomEvent.stop(t)},this.clickEventFn=function(e){t.clickHandle?(clearTimeout(t.clickHandle),t.clickHandle=0,t.options.show_last_node&&(t.preClick(e),t.getMouseClickHandler(e)),t.getDblClickHandler(e)):(t.preClick(e),t.clickHandle=setTimeout((function(){t.getMouseClickHandler(e),t.clickHandle=0}),t.clickSpeed))},this.moveEventFn=function(e){t.clickHandle||t.getMouseMoveHandler(e)},e.on("click",this.clickEventFn,this),e.on("mousemove",this.moveEventFn,this),this.resetRuler()},initLayer:function(){this.layer=i().featureGroup(),this.layer.addTo(this.mainLayer),this.layer.on("selected",this.layerSelected),this.layer.on("click",this.clickEventFn,this)},resetRuler:function(t){var e=this._map;t&&(e.off("click",this.clickEventFn,this),e.off("mousemove",this.moveEventFn,this),this.mainLayer&&this._map.removeLayer(this.mainLayer),this.mainLayer=null,this._map.touchZoom.enable(),this._map.boxZoom.enable(),this._map.keyboard.enable(),this._map.tap&&this._map.tap.enable()),this.layer=null,this.prevLatlng=null,this.poly=null,this.multi=null,this.latlngs=null,this.latlngsList=[],this.sum=0,this.distance=0,this.separation=1,this.last=0,this.fixedLast=0,this.totalIcon=null,this.total=null,this.lastCircle=null,this.UNIT_CONV=1e3,this.SUB_UNIT_CONV=1e3,this.UNIT="km",this.SUB_UNIT="m","imperial"===this.options.unitSystem&&(this.UNIT_CONV=1609.344,this.SUB_UNIT_CONV=5280,this.UNIT="mi",this.SUB_UNIT="ft"),this.measure={scalar:0,unit:this.SUB_UNIT}},cleanUpMarkers:function(t){var e=this.layer;e&&e.eachLayer((function(n){n.options&&"tmp"===n.options.type&&(t?n.options.type="fixed":e.removeLayer(n))}))},cleanUpFixed:function(){var t=this.layer;t&&t.eachLayer((function(e){e.options&&"fixed"===e.options.type&&t.removeLayer(e)}))},convertDots:function(){var t=this,e=this.layer;e&&e.eachLayer((function(e){if(e.options&&"dot"===e.options.type){var n=e.options.marker,s=n?n.options.icon.options:null,a=s?s.html:"";if(a&&-1===a.indexOf(t.measure.unit)){var o=e.options.label.split(" "),r=parseFloat(o[0]),l=o[1],c="";-1!==e.options.label.indexOf(t.measure.unit)?c=e.options.label:l===t.UNIT?c=(r*t.SUB_UNIT_CONV).toFixed(2)+" "+t.SUB_UNIT:l===t.SUB_UNIT&&(c=(r/t.SUB_UNIT_CONV).toFixed(2)+" "+t.UNIT);var d=i().divIcon({className:"total-popup-label",html:c});n.setIcon(d)}}}))},displayMarkers:function(t,e,n){var s,a,o,r,l,c=t[t.length-1],d=t[0],p=d.distanceTo(c)/this.UNIT_CONV,h=p,u=this._map.latLngToContainerPoint(c),m=this._map.latLngToContainerPoint(d),g=1;this.measure.unit===this.SUB_UNIT&&(h*=g=this.SUB_UNIT_CONV);for(var v=n*g+h,f=n*g,y=Math.floor(f);y<v;y++)r=(v-y)/h,y%this.separation||y<f||(s=u.x-r*(u.x-m.x),a=u.y-r*(u.y-m.y),l=i().point(s,a),c=this._map.containerPointToLatLng(l),o=y+" "+this.measure.unit,this.renderCircle(c,0,this.layer,e?"fixed":"tmp",o),this.last=v);return p},renderCircle:function(t,e,n,s,a){var o=this.options.color,r="",l="",c={color:this.options.color,fillOpacity:1,opacity:1,fill:!0,type:s=s||"circle"},d=this.prevLatlng&&this._map?this._map.latLngToContainerPoint(this.prevLatlng):null,p=this._map?this._map.latLngToContainerPoint(t):null;"dot"===s&&(l="node-label",d&&this.options.show_azimut&&(r=' <span class="azimut"> '+this.lastAzimut+"&deg;</span>"));var h=this._map.containerPointToLatLng(p);if(a){var u=i().divIcon({className:"total-popup-label "+l,html:'<span style="color: '+o+';">'+a+r+"</span>"});c.icon=u,c.marker=i().marker(h,{icon:u,type:s}).addTo(n),c.label=a}var m=i().circleMarker(t,c);return m.setRadius(3),m.addTo(n),m},getAzimut:function(t,e){var n=0;return t&&e&&((n=parseInt(180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI))>0?n+=90:n<0&&(n=(n=Math.abs(n))<=90?90-n:360-(n-90))),this.lastAzimut=n,n},renderPolyline:function(t,e,n){var s=i().polyline(t,{color:this.options.color,weight:2,opacity:1,dashArray:e});return s.addTo(n),s},renderMultiPolyline:function(t,e,n){var s;return(s=i().version.startsWith("0")?i().multiPolyline(t,{color:this.options.color,weight:2,opacity:1,dashArray:e}):i().polyline(t,{color:this.options.color,weight:2,opacity:1,dashArray:e})).addTo(n),s},formatDistance:function(t,e){return{scalar:i().Util.formatNum(t<1?t*parseFloat(this.SUB_UNIT_CONV):t,e),unit:t<1?this.SUB_UNIT:this.UNIT}},hasClass:function(t,e){var n=i().DomUtil.hasClass;for(var s in e)if(n(t,e[s]))return!0;return!1},preClick:function(t){var e=this,n=t.originalEvent.target;this.hasClass(n,["leaflet-popup","total-popup-content"])||(e.layer||e.initLayer(),e.cleanUpMarkers(!0),e.fixedLast=e.last,e.prevLatlng=t.latlng,e.sum=0)},getMouseClickHandler:function(t){var e,n=this;for(var s in n.fixedLast=n.last,n.sum=0,n.poly&&(n.latlngsList.push(n.latlngs),n.multi?n.multi.setLatLngs(n.latlngsList):n.multi=n.renderMultiPolyline(n.latlngsList,"5 5",n.layer,"dot")),n.latlngsList)e=n.latlngsList[s],n.sum+=e[0].distanceTo(e[1])/n.UNIT_CONV;var a=(n.measure.unit===this.SUB_UNIT?n.sum*n.SUB_UNIT_CONV:n.sum).toFixed(2);n.renderCircle(t.latlng,0,n.layer,"dot",parseInt(a)?a+" "+n.measure.unit:""),n.prevLatlng=t.latlng},getMouseMoveHandler:function(t){var e="";if(this.prevLatlng){var n=t.latlng;this.latlngs=[this.prevLatlng,t.latlng],this.poly?this.poly.setLatLngs(this.latlngs):this.poly=this.renderPolyline(this.latlngs,"5 5",this.layer),this.distance=parseFloat(this.prevLatlng.distanceTo(t.latlng))/this.UNIT_CONV,this.measure=this.formatDistance(this.distance+this.sum,2);var s=this.prevLatlng?this._map.latLngToContainerPoint(this.prevLatlng):null,a=this._map.latLngToContainerPoint(n);if(s&&this.options.show_azimut)e=' <span class="azimut azimut-final" style="'+("color: "+this.options.contrastingColor+";")+'"> &nbsp; '+this.getAzimut(s,a)+"&deg;</span>";var o=this.measure.scalar+" "+this.measure.unit,r='<span class="total-popup-content" style="background-color:'+this.options.color+"; color: "+this.options.contrastingColor+'">'+o+e+"</span>";this.total?(this.totalIcon=i().divIcon({className:"total-popup",html:r}),this.total.setLatLng(t.latlng),this.total.setIcon(this.totalIcon)):(this.totalIcon=i().divIcon({className:"total-popup",html:r}),this.total=i().marker(t.latlng,{icon:this.totalIcon,clickable:!0}).addTo(this.layer));var l=this.measure.scalar,c=this.separation,d=parseInt(l).toString().length,p=Math.pow(10,d),h=l>p/2?p/10:p/20,u=0;if(this.separation=h,c!==this.separation&&this.fixedLast){this.cleanUpMarkers(),this.cleanUpFixed();var m=this.multi.getLatLngs();for(var g in m)u+=this.displayMarkers.apply(this,[m[g],!0,u]);this.displayMarkers.apply(this,[this.poly.getLatLngs(),!1,this.sum]),this.convertDots()}else this.cleanUpMarkers(),this.displayMarkers.apply(this,[this.poly.getLatLngs(),!1,this.sum])}},getDblClickHandler:function(t){var e="",n=this;if(this.total){if(this.layer.off("click"),i().DomEvent.stop(t),this.options.show_azimut)e=' <span class="azimut azimut-final" style="'+("color: "+this.options.contrastingColor+";")+'"> &nbsp; '+this.lastAzimut+"&deg;</span>";var s=this.layer,a=this.measure.scalar+" "+this.measure.unit+" ",o=(this.measure.unit===this.SUB_UNIT?(this.measure.scalar,this.UNIT_CONV):this.measure.scalar,this.total.getLatLng(),this.total),r=['<div class="total-popup-content" style="background-color:'+this.options.color+"; color: "+this.options.contrastingColor+'">'+a+e,'  <svg class="close" viewbox="0 0 45 35">','   <path style="stroke: '+this.options.contrastingColor+'" class="close" d="M 10,10 L 30,30 M 30,10 L 10,30" />',"  </svg>","</div>"].join("");this.totalIcon=i().divIcon({className:"total-popup",html:r}),this.total.setIcon(this.totalIcon);var l={total:this.measure,total_label:o,unit:this.UNIT_CONV,sub_unit:this.SUB_UNIT_CONV};s.on("click",(function(t){i().DomUtil.hasClass(t.originalEvent.target,"close")?n.mainLayer.removeLayer(s):s.fireEvent("selected",l)})),s.fireEvent("selected",l),this.resetRuler(!1)}},purgeLayers:function(t){for(var e in t)t[e]&&this.layer.removeLayer(t[e])},layerSelected:function(t){}}),l=()=>{const t=(0,a.ko)();(0,s.useEffect)((()=>{const e=new r({unitSystem:"imperial",position:"topleft",color:"#FF0080",type:"line"});return e.addTo(t),()=>{e.remove()}}))}},900:(t,e,n)=>{n.d(e,{A:()=>r});var s=n(228),a=n.n(s),o=n(5043),i=n(9896);const r=()=>{const t=(0,i.ko)(),e=[52.56555275762325,-1.4667093894864072];(0,o.useEffect)((()=>{const n=new(a().Control)({position:"topleft"}),s=new(a().control.scale)({imperial:!1});return n.onAdd=function(){const n=a().DomUtil.create("div","leaflet-control leaflet-bar");return n.onclick=()=>{t.setView(e,6)},n.insertAdjacentHTML("afterbegin",'\n        <a title="Reset view">\n            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">\n            <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>\n            <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>\n            </svg>\n        </a>\n        '),n},n.addTo(t),s.addTo(t),()=>{n.remove(),s.remove()}}),[])}}}]);
//# sourceMappingURL=851.2e191db7.chunk.js.map