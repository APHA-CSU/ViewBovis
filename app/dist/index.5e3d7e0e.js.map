{"mappings":"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","sources":["src/js/L.LinearMeasurement.js"],"sourcesContent":["(function(){\r\n\r\n    L.Control.LinearMeasurement = L.Control.extend({\r\n  \r\n        options: {\r\n            position: 'topleft',\r\n            unitSystem: 'imperial', // imperial | metric\r\n            color: '#4D90FE',\r\n            contrastingColor: '#fff',\r\n            show_last_node: false,\r\n            show_azimut: false\r\n        },\r\n  \r\n        clickSpeed: 200,\r\n  \r\n        onAdd: function (map) {\r\n            var container = L.DomUtil.create('div', 'leaflet-control leaflet-bar'),\r\n                link = L.DomUtil.create('a', 'icon-ruler', container),\r\n                map_container = map.getContainer(),\r\n                me = this;\r\n  \r\n            link.href = '#';\r\n            link.title = 'Toggle measurement tool';\r\n  \r\n            L.DomEvent.on(link, 'click', L.DomEvent.stop).on(link, 'click', function(){\r\n                if(L.DomUtil.hasClass(link, 'icon-active')){\r\n                    me.resetRuler(!!me.mainLayer);\r\n                    L.DomUtil.removeClass(link, 'icon-active');\r\n                    L.DomUtil.removeClass(map_container, 'ruler-map');\r\n  \r\n                } else {\r\n                    me.initRuler();\r\n                    L.DomUtil.addClass(link, 'icon-active');\r\n                    L.DomUtil.addClass(map_container, 'ruler-map');\r\n                }\r\n            });\r\n  \r\n            function contrastingColor(color){\r\n                return (luma(color) >= 165) ? '000' : 'fff';\r\n            }\r\n  \r\n            function luma(color){\r\n                var rgb = (typeof color === 'string') ? hexToRGBArray(color) : color;\r\n                return (0.2126 * rgb[0]) + (0.7152 * rgb[1]) + (0.0722 * rgb[2]); // SMPTE C, Rec. 709 weightings\r\n            }\r\n  \r\n            function hexToRGBArray(color){\r\n                if (color.length === 3)\r\n                    color = color.charAt(0) + color.charAt(0) + color.charAt(1) + color.charAt(1) + color.charAt(2) + color.charAt(2);\r\n                else if (color.length !== 6)\r\n                    throw('Invalid hex color: ' + color);\r\n                var rgb = [];\r\n                for (var i = 0; i <= 2; i++)\r\n                    rgb[i] = parseInt(color.substr(i * 2, 2), 16);\r\n                return rgb;\r\n            }\r\n  \r\n            if(this.options.color && this.options.color.indexOf('#') === -1){\r\n                this.options.color = '#' + this.options.color;\r\n            } else if(!this.options.color){\r\n                this.options.color = '#4D90FE';\r\n            }\r\n  \r\n            var originalColor = this.options.color.replace('#', '');\r\n  \r\n            this.options.contrastingColor = '#'+contrastingColor(originalColor);\r\n  \r\n            return container;\r\n        },\r\n  \r\n        onRemove: function(map){\r\n            this.resetRuler(!!this.mainLayer);\r\n        },\r\n  \r\n        initRuler: function(){\r\n            var me = this,\r\n                map = this._map;\r\n  \r\n            this.mainLayer = L.featureGroup();\r\n            this.mainLayer.addTo(this._map);\r\n  \r\n            map.touchZoom.disable();\r\n            map.doubleClickZoom.disable();\r\n            map.boxZoom.disable();\r\n            map.keyboard.disable();\r\n  \r\n            if(map.tap) {\r\n                map.tap.disable();\r\n            }\r\n  \r\n            this.dblClickEventFn = function(e){\r\n                L.DomEvent.stop(e);\r\n            };\r\n  \r\n            this.clickEventFn = function(e){\r\n              if(me.clickHandle){\r\n                clearTimeout(me.clickHandle);\r\n                me.clickHandle = 0;\r\n  \r\n                if(me.options.show_last_node){\r\n                  me.preClick(e);\r\n                  me.getMouseClickHandler(e);\r\n                }\r\n  \r\n                me.getDblClickHandler(e);\r\n  \r\n              } else {\r\n                me.preClick(e);\r\n  \r\n                me.clickHandle = setTimeout(function(){\r\n                  me.getMouseClickHandler(e);\r\n                  me.clickHandle = 0;\r\n  \r\n                }, me.clickSpeed);\r\n              }\r\n            };\r\n  \r\n            this.moveEventFn = function(e){\r\n              if(!me.clickHandle){\r\n                me.getMouseMoveHandler(e);\r\n              }\r\n            };\r\n  \r\n            map.on('click', this.clickEventFn, this);\r\n            map.on('mousemove', this.moveEventFn, this);\r\n  \r\n            this.resetRuler();\r\n        },\r\n  \r\n        initLayer: function(){\r\n            this.layer = L.featureGroup();\r\n            this.layer.addTo(this.mainLayer);\r\n            this.layer.on('selected', this.layerSelected);\r\n            this.layer.on('click', this.clickEventFn, this);\r\n        },\r\n  \r\n        resetRuler: function(resetLayer){\r\n            var map = this._map;\r\n  \r\n            if(resetLayer){\r\n                map.off('click', this.clickEventFn, this);\r\n                map.off('mousemove', this.moveEventFn, this);\r\n  \r\n                if(this.mainLayer){\r\n                    this._map.removeLayer(this.mainLayer);\r\n                }\r\n  \r\n                this.mainLayer = null;\r\n  \r\n                this._map.touchZoom.enable();\r\n                this._map.boxZoom.enable();\r\n                this._map.keyboard.enable();\r\n  \r\n                if(this._map.tap) {\r\n                    this._map.tap.enable();\r\n                }\r\n            }\r\n  \r\n            this.layer = null;\r\n            this.prevLatlng = null;\r\n            this.poly = null;\r\n            this.multi = null;\r\n            this.latlngs = null;\r\n            this.latlngsList = [];\r\n            this.sum = 0;\r\n            this.distance = 0;\r\n            this.separation = 1;\r\n            this.last = 0;\r\n            this.fixedLast = 0;\r\n            this.totalIcon = null;\r\n            this.total = null;\r\n            this.lastCircle = null;\r\n  \r\n            /* Leaflet return distances in meters */\r\n            this.UNIT_CONV = 1000;\r\n            this.SUB_UNIT_CONV = 1000;\r\n            this.UNIT = 'km';\r\n            this.SUB_UNIT = 'm';\r\n  \r\n            if(this.options.unitSystem === 'imperial'){\r\n                this.UNIT_CONV = 1609.344;\r\n                this.SUB_UNIT_CONV = 5280;\r\n                this.UNIT = 'mi';\r\n                this.SUB_UNIT = 'ft';\r\n            }\r\n  \r\n            this.measure = {\r\n                scalar: 0,\r\n                unit: this.SUB_UNIT\r\n            };\r\n        },\r\n  \r\n        cleanUpMarkers: function(fixed){\r\n            var layer = this.layer;\r\n  \r\n            if(layer){\r\n                layer.eachLayer(function(l){\r\n                    if(l.options && l.options.type === 'tmp'){\r\n                        if(fixed){\r\n                            l.options.type = 'fixed';\r\n                        } else {\r\n                            layer.removeLayer(l);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        },\r\n  \r\n        cleanUpFixed: function(){\r\n            var layer = this.layer;\r\n  \r\n            if(layer) {\r\n                layer.eachLayer(function(l){\r\n                    if(l.options && (l.options.type === 'fixed')){\r\n                        layer.removeLayer(l);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n  \r\n        convertDots: function(){\r\n            var me = this,\r\n                layer = this.layer;\r\n  \r\n            if(layer) {\r\n                layer.eachLayer(function(l){\r\n                    if(l.options && (l.options.type === 'dot')){\r\n  \r\n                        var m = l.options.marker,\r\n                            i = m ? m.options.icon.options : null,\r\n                            il = i ? i.html : '';\r\n  \r\n                        if(il && il.indexOf(me.measure.unit) === -1){\r\n                            var str = l.options.label,\r\n                                s = str.split(' '),\r\n                                e = parseFloat(s[0]),\r\n                                u = s[1],\r\n                                label = '';\r\n  \r\n                            if(l.options.label.indexOf(me.measure.unit) !== -1){\r\n                                label = l.options.label;\r\n  \r\n                            } else if(u === me.UNIT){\r\n                                label = (e * me.SUB_UNIT_CONV).toFixed(2) + ' ' + me.SUB_UNIT;\r\n  \r\n                            } else if(u === me.SUB_UNIT){\r\n                                label = (e / me.SUB_UNIT_CONV).toFixed(2) + ' ' + me.UNIT;\r\n                            }\r\n  \r\n                            var cicon = L.divIcon({\r\n                                className: 'total-popup-label',\r\n                                html: label\r\n                            });\r\n  \r\n                            m.setIcon(cicon);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        },\r\n  \r\n        displayMarkers: function(latlngs, multi, sum) {\r\n            var x, y, label, ratio, p,\r\n                latlng = latlngs[latlngs.length-1],\r\n                prevLatlng = latlngs[0],\r\n                original = prevLatlng.distanceTo(latlng)/this.UNIT_CONV,\r\n                dis = original;\r\n  \r\n            var p2 = this._map.latLngToContainerPoint(latlng),\r\n                p1 = this._map.latLngToContainerPoint(prevLatlng),\r\n                unit = 1;\r\n  \r\n            if(this.measure.unit === this.SUB_UNIT){\r\n                unit = this.SUB_UNIT_CONV;\r\n                dis = dis * unit;\r\n            }\r\n  \r\n            var t = (sum * unit) + dis,\r\n                qu = sum * unit;\r\n  \r\n            for(var q = Math.floor(qu); q < t; q++){\r\n                ratio = (t-q) / dis;\r\n  \r\n                if(q % this.separation || q < qu) {\r\n                    continue;\r\n                }\r\n  \r\n                x = (p2.x - ratio * (p2.x - p1.x));\r\n                y = (p2.y - ratio * (p2.y - p1.y));\r\n  \r\n                p = L.point(x, y);\r\n  \r\n                /* render a circle spaced by separation */\r\n  \r\n                latlng = this._map.containerPointToLatLng(p);\r\n  \r\n                label = (q + ' ' + this.measure.unit);\r\n  \r\n                this.renderCircle(latlng, 0, this.layer, multi ? 'fixed' : 'tmp', label);\r\n  \r\n                this.last = t;\r\n            }\r\n  \r\n            return original;\r\n        },\r\n  \r\n        renderCircle: function(latLng, radius, layer, type, label) {\r\n            var color = this.options.color,\r\n                lineColor = this.options.color,\r\n                azimut = '',\r\n                nodeCls = '';\r\n  \r\n            type = type || 'circle';\r\n  \r\n            linesHTML = [];\r\n  \r\n            var options = {\r\n                color: lineColor,\r\n                fillOpacity: 1,\r\n                opacity: 1,\r\n                fill: true,\r\n                type: type\r\n            };\r\n  \r\n            var a = this.prevLatlng ? this._map.latLngToContainerPoint(this.prevLatlng) : null,\r\n                b = this._map.latLngToContainerPoint(latLng);\r\n  \r\n            if(type === 'dot'){\r\n              nodeCls = 'node-label';\r\n  \r\n              if(a && this.options.show_azimut){\r\n                azimut = ' <span class=\"azimut\"> '+this.lastAzimut+'&deg;</span>';\r\n              }\r\n            }\r\n  \r\n            p_latLng = this._map.containerPointToLatLng(b);\r\n  \r\n            if(label){\r\n                var cicon = L.divIcon({\r\n                    className: 'total-popup-label ' + nodeCls,\r\n                    html: '<span style=\"color: '+color+';\">'+label+azimut+'</span>'\r\n                });\r\n  \r\n                options.icon = cicon;\r\n                options.marker = L.marker(p_latLng, { icon: cicon, type: type }).addTo(layer);\r\n                options.label = label;\r\n            }\r\n  \r\n            var circle = L.circleMarker(latLng, options);\r\n  \r\n            circle.setRadius(3);\r\n            circle.addTo(layer);\r\n  \r\n            return circle;\r\n        },\r\n  \r\n        getAzimut: function(a, b){\r\n          var deg = 0;\r\n  \r\n          if(a && b){\r\n            deg = parseInt(Math.atan2(b.y - a.y, b.x - a.x) * 180 / Math.PI);\r\n  \r\n            if(deg > 0){\r\n              deg += 90;\r\n            } else if(deg < 0){\r\n              deg = Math.abs(deg);\r\n              if(deg <= 90){\r\n                deg = 90 - deg;\r\n              } else {\r\n                deg = 360 - (deg - 90);\r\n              }\r\n            }\r\n          }\r\n  \r\n          this.lastAzimut = deg;\r\n  \r\n          return deg;\r\n        },\r\n  \r\n        renderPolyline: function(latLngs, dashArray, layer) {\r\n            var poly = L.polyline(latLngs, {\r\n                color: this.options.color,\r\n                weight: 2,\r\n                opacity: 1,\r\n                dashArray: dashArray\r\n            });\r\n  \r\n            poly.addTo(layer);\r\n  \r\n            return poly;\r\n        },\r\n  \r\n        renderMultiPolyline: function(latLngs, dashArray, layer) {\r\n            /* Leaflet version 1+ delegated the concept of multi-poly-line to the polyline */\r\n            var multi;\r\n  \r\n            if(L.version.startsWith('0')){\r\n                multi = L.multiPolyline(latLngs, {\r\n                    color: this.options.color,\r\n                    weight: 2,\r\n                    opacity: 1,\r\n                    dashArray: dashArray\r\n                });\r\n            } else {\r\n                multi = L.polyline(latLngs, {\r\n                    color: this.options.color,\r\n                    weight: 2,\r\n                    opacity: 1,\r\n                    dashArray: dashArray\r\n                });\r\n            }\r\n  \r\n            multi.addTo(layer);\r\n  \r\n            return multi;\r\n        },\r\n  \r\n        formatDistance: function(distance, precision) {\r\n            var s = L.Util.formatNum((distance < 1 ? distance*parseFloat(this.SUB_UNIT_CONV) : distance), precision),\r\n                u = (distance < 1 ? this.SUB_UNIT : this.UNIT);\r\n  \r\n            return { scalar: s, unit: u };\r\n        },\r\n  \r\n        hasClass: function(target, classes){\r\n            var fn = L.DomUtil.hasClass;\r\n  \r\n            for(var i in classes){\r\n                if(fn(target, classes[i])){\r\n                    return true;\r\n                }\r\n            }\r\n  \r\n            return false;\r\n        },\r\n  \r\n        preClick: function(e){\r\n          var me = this,\r\n              target = e.originalEvent.target;\r\n  \r\n          if(this.hasClass(target, ['leaflet-popup', 'total-popup-content'])){\r\n              return;\r\n          }\r\n  \r\n          if(!me.layer){\r\n              me.initLayer();\r\n          }\r\n  \r\n          me.cleanUpMarkers(true);\r\n  \r\n          me.fixedLast = me.last;\r\n          me.prevLatlng = e.latlng;\r\n          me.sum = 0;\r\n        },\r\n  \r\n        getMouseClickHandler: function(e){\r\n            var me = this;\r\n            me.fixedLast = me.last;\r\n            me.sum = 0;\r\n  \r\n            if(me.poly){\r\n                me.latlngsList.push(me.latlngs);\r\n  \r\n                if(!me.multi){\r\n                    me.multi = me.renderMultiPolyline(me.latlngsList, '5 5', me.layer, 'dot');\r\n                } else {\r\n                    me.multi.setLatLngs(me.latlngsList);\r\n                }\r\n            }\r\n  \r\n            var o, dis;\r\n            for(var l in me.latlngsList){\r\n                o = me.latlngsList[l];\r\n                me.sum += o[0].distanceTo(o[1])/me.UNIT_CONV;\r\n            }\r\n  \r\n            if(me.measure.unit === this.SUB_UNIT){\r\n                dis = me.sum * me.SUB_UNIT_CONV;\r\n            } else {\r\n                dis = me.sum;\r\n            }\r\n  \r\n            var s = dis.toFixed(2);\r\n  \r\n            me.renderCircle(e.latlng, 0, me.layer, 'dot', parseInt(s) ? (s + ' ' + me.measure.unit) : '' );\r\n            me.prevLatlng = e.latlng;\r\n        },\r\n  \r\n        getMouseMoveHandler: function(e){\r\n            var azimut = '';\r\n  \r\n            if(this.prevLatlng){\r\n                var latLng = e.latlng;\r\n  \r\n                this.latlngs = [this.prevLatlng, e.latlng];\r\n  \r\n                if(!this.poly){\r\n                    this.poly = this.renderPolyline(this.latlngs, '5 5', this.layer);\r\n                } else {\r\n                    this.poly.setLatLngs(this.latlngs);\r\n                }\r\n  \r\n                /* Distance in miles/meters */\r\n                this.distance = parseFloat(this.prevLatlng.distanceTo(e.latlng))/this.UNIT_CONV;\r\n  \r\n                /* scalar and unit */\r\n                this.measure = this.formatDistance(this.distance + this.sum, 2);\r\n  \r\n                var a = this.prevLatlng ? this._map.latLngToContainerPoint(this.prevLatlng) : null,\r\n                    b = this._map.latLngToContainerPoint(latLng);\r\n  \r\n                if(a && this.options.show_azimut){\r\n                  var style = 'color: '+this.options.contrastingColor+';';\r\n                  azimut = ' <span class=\"azimut azimut-final\" style=\"'+style+'\"> &nbsp; '+this.getAzimut(a, b)+'&deg;</span>';\r\n                }\r\n  \r\n                /* tooltip with total distance */\r\n                var label = this.measure.scalar + ' ' + this.measure.unit,\r\n                    html = '<span class=\"total-popup-content\" style=\"background-color:'+this.options.color+'; color: '+this.options.contrastingColor+'\">' + label + azimut + '</span>';\r\n  \r\n                if(!this.total){\r\n                    this.totalIcon = L.divIcon({ className: 'total-popup', html: html });\r\n  \r\n                    this.total = L.marker(e.latlng, {\r\n                        icon: this.totalIcon,\r\n                        clickable: true\r\n                    }).addTo(this.layer);\r\n  \r\n                } else {\r\n                    this.totalIcon = L.divIcon({ className: 'total-popup', html: html });\r\n                    this.total.setLatLng(e.latlng);\r\n                    this.total.setIcon(this.totalIcon);\r\n                }\r\n  \r\n                /* Rules for separation using only distance criteria */\r\n                var ds = this.measure.scalar,\r\n                    old_separation = this.separation,\r\n                    digits = parseInt(ds).toString().length,\r\n                    num = Math.pow(10, digits),\r\n                    real = ds > (num/2) ? (num/10) : (num/20),\r\n                    dimension = 0;\r\n  \r\n                this.separation = real;\r\n  \r\n                /* If there is a change in the segment length we want to re-space\r\n                   the dots on the multi line */\r\n                if(old_separation !== this.separation && this.fixedLast){\r\n                    this.cleanUpMarkers();\r\n                    this.cleanUpFixed();\r\n  \r\n                    var multi_latlngs = this.multi.getLatLngs();\r\n  \r\n                    for(var s in multi_latlngs){\r\n                        dimension += this.displayMarkers.apply(this, [multi_latlngs[s], true, dimension]);\r\n                    }\r\n  \r\n                    this.displayMarkers.apply(this, [this.poly.getLatLngs(), false, this.sum]);\r\n  \r\n                    /* Review that the dots are in correct units */\r\n                    this.convertDots();\r\n  \r\n                } else {\r\n                    this.cleanUpMarkers();\r\n                    this.displayMarkers.apply(this, [this.poly.getLatLngs(), false, this.sum]);\r\n                }\r\n            }\r\n        },\r\n  \r\n        getDblClickHandler: function(e){\r\n            var azimut = '',\r\n                me = this;\r\n  \r\n            if(!this.total){\r\n                return;\r\n            }\r\n  \r\n            this.layer.off('click');\r\n  \r\n            L.DomEvent.stop(e);\r\n  \r\n            if(this.options.show_azimut){\r\n              var style = 'color: '+this.options.contrastingColor+';';\r\n              azimut = ' <span class=\"azimut azimut-final\" style=\"'+style+'\"> &nbsp; '+this.lastAzimut+'&deg;</span>';\r\n            }\r\n  \r\n            var workspace = this.layer,\r\n                label = this.measure.scalar + ' ' + this.measure.unit + ' ',\r\n                total_scalar = this.measure.unit === this.SUB_UNIT ? this.measure.scalar/this.UNIT_CONV : this.measure.scalar,\r\n                total_latlng = this.total.getLatLng(),\r\n                total_label = this.total,\r\n                html = [\r\n                    '<div class=\"total-popup-content\" style=\"background-color:'+this.options.color+'; color: '+this.options.contrastingColor+'\">' + label + azimut,\r\n                    '  <svg class=\"close\" viewbox=\"0 0 45 35\">',\r\n                    '   <path style=\"stroke: '+this.options.contrastingColor+'\" class=\"close\" d=\"M 10,10 L 30,30 M 30,10 L 10,30\" />',\r\n                    '  </svg>',\r\n                    '</div>'\r\n                ].join('');\r\n  \r\n            this.totalIcon = L.divIcon({ className: 'total-popup', html: html });\r\n            this.total.setIcon(this.totalIcon);\r\n  \r\n            var data = {\r\n                total: this.measure,\r\n                total_label: total_label,\r\n                unit: this.UNIT_CONV,\r\n                sub_unit: this.SUB_UNIT_CONV\r\n            };\r\n  \r\n            var fireSelected = function(e){\r\n                if(L.DomUtil.hasClass(e.originalEvent.target, 'close')){\r\n                    me.mainLayer.removeLayer(workspace);\r\n                } else {\r\n                    workspace.fireEvent('selected', data);\r\n                }\r\n            };\r\n  \r\n            workspace.on('click', fireSelected);\r\n            workspace.fireEvent('selected', data);\r\n  \r\n            this.resetRuler(false);\r\n        },\r\n  \r\n        purgeLayers: function(layers){\r\n            for(var i in layers){\r\n                if(layers[i]) {\r\n                  this.layer.removeLayer(layers[i]);\r\n                }\r\n            }\r\n        },\r\n  \r\n        layerSelected: function(e){}\r\n    });\r\n  \r\n  })();"],"names":[],"version":3,"file":"index.5e3d7e0e.js.map","sourceRoot":"/__parcel_source_root/"}